<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨ | OMG!IT'S 11!!</title><meta name="author" content="Mnizjc"><meta name="copyright" content="Mnizjc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æ¥è§¦äº†ä¸€é—¨æ–°è¯­è¨€: Rust å½“åˆæ¥è§¦è¿™ç©æ„æ˜¯å› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªæˆ‘æ­¤å‰ä»æ¥æ²¡å¬è¯´è¿‡çš„å¤„ç†å†…å­˜å›æ”¶é—®é¢˜çš„æ–¹æ³•--æ‰€æœ‰æƒæœºåˆ¶. é€šè¿‡ä¸€ç³»åˆ—çš„é™åˆ¶å’Œä½œç”¨åŸŸç®¡ç†,æŠŠè¯¥é‡Šæ”¾çš„åœ¨åˆé€‚çš„åœ°æ–¹éƒ½é‡Šæ”¾äº†. ä½†æ˜¯è¿™ä¸ªã€Œåˆé€‚ã€çš„æœ‰ç‚¹ä¸ç¬¦åˆä¹‹å‰æˆ‘è§è¿‡çš„è¯­è¨€çš„ä¹ æƒ¯. æ¯”å¦‚ä¸€ä¸ªå¯¹è±¡åªæ˜¯åœ¨ä¸€è¡Œä¹‹å†…ä½¿ç”¨ä¸€ä¸‹å’Œå®ƒç›¸å…³çš„å¼•ç”¨(ä¸å–å¾—æ‰€æœ‰æƒçš„æƒ…å†µä¸‹ä½¿ç”¨å€¼çš„ä¸œè¥¿),ä½†æ˜¯å› ä¸ºè¿™ç©æ„è¿™ä¸€è¡Œä¹‹åå°±ç»“æŸäº†,æ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠå®ƒé‡Šæ”¾æ‰,è¿™å°±å¯¼è‡´æ‚¬ç©ºå¼•ç”¨">
<meta property="og:type" content="article">
<meta property="og:title" content="rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨">
<meta property="og:url" content="https://mnizjc.qzz.io/2024/09/23/rust%E5%AE%9E%E7%8E%B0lua%E8%A7%A3%E9%87%8A%E5%99%A8%E4%B9%8B%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/index.html">
<meta property="og:site_name" content="OMG!IT&#39;S 11!!">
<meta property="og:description" content="æ¥è§¦äº†ä¸€é—¨æ–°è¯­è¨€: Rust å½“åˆæ¥è§¦è¿™ç©æ„æ˜¯å› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªæˆ‘æ­¤å‰ä»æ¥æ²¡å¬è¯´è¿‡çš„å¤„ç†å†…å­˜å›æ”¶é—®é¢˜çš„æ–¹æ³•--æ‰€æœ‰æƒæœºåˆ¶. é€šè¿‡ä¸€ç³»åˆ—çš„é™åˆ¶å’Œä½œç”¨åŸŸç®¡ç†,æŠŠè¯¥é‡Šæ”¾çš„åœ¨åˆé€‚çš„åœ°æ–¹éƒ½é‡Šæ”¾äº†. ä½†æ˜¯è¿™ä¸ªã€Œåˆé€‚ã€çš„æœ‰ç‚¹ä¸ç¬¦åˆä¹‹å‰æˆ‘è§è¿‡çš„è¯­è¨€çš„ä¹ æƒ¯. æ¯”å¦‚ä¸€ä¸ªå¯¹è±¡åªæ˜¯åœ¨ä¸€è¡Œä¹‹å†…ä½¿ç”¨ä¸€ä¸‹å’Œå®ƒç›¸å…³çš„å¼•ç”¨(ä¸å–å¾—æ‰€æœ‰æƒçš„æƒ…å†µä¸‹ä½¿ç”¨å€¼çš„ä¸œè¥¿),ä½†æ˜¯å› ä¸ºè¿™ç©æ„è¿™ä¸€è¡Œä¹‹åå°±ç»“æŸäº†,æ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠå®ƒé‡Šæ”¾æ‰,è¿™å°±å¯¼è‡´æ‚¬ç©ºå¼•ç”¨">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://free.picui.cn/free/2026/02/01/697e3db74f259.jpg">
<meta property="article:published_time" content="2024-09-22T16:30:18.000Z">
<meta property="article:modified_time" content="2026-02-23T14:48:15.625Z">
<meta property="article:author" content="Mnizjc">
<meta property="article:tag" content="learn">
<meta property="article:tag" content="rust">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://free.picui.cn/free/2026/02/01/697e3db74f259.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨",
  "url": "https://mnizjc.qzz.io/2024/09/23/rust%E5%AE%9E%E7%8E%B0lua%E8%A7%A3%E9%87%8A%E5%99%A8%E4%B9%8B%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/",
  "image": "https://free.picui.cn/free/2026/02/01/697e3db74f259.jpg",
  "datePublished": "2024-09-22T16:30:18.000Z",
  "dateModified": "2026-02-23T14:48:15.625Z",
  "author": [
    {
      "@type": "Person",
      "name": "Mnizjc",
      "url": "https://mnizjc.qzz.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://mnizjc.qzz.io/2024/09/23/rust%E5%AE%9E%E7%8E%B0lua%E8%A7%A3%E9%87%8A%E5%99%A8%E4%B9%8B%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 8 || hour >= 22
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-6572853481816595',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(/url(https:/cdn.jsdelivr.net/gh/Mnizjc/img-repository/blog-bg.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/beluga.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://free.picui.cn/free/2026/02/01/697e3db74f259.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">OMG!IT'S 11!!</span></a><a class="nav-page-title" href="/"><span class="site-name">rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-subway"></i><span> å¼€å¾€</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">rustå®ç°luaè§£é‡Šå™¨ä¹‹è¯æ³•åˆ†æå™¨</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-09-22T16:30:18.000Z" title="å‘è¡¨äº 2024-09-23 00:30:18">2024-09-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2026-02-23T14:48:15.625Z" title="æ›´æ–°äº 2026-02-23 22:48:15">2026-02-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/rust/">rust</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>æ¥è§¦äº†ä¸€é—¨æ–°è¯­è¨€: Rust</p>
<p>å½“åˆæ¥è§¦è¿™ç©æ„æ˜¯å› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªæˆ‘æ­¤å‰ä»æ¥æ²¡å¬è¯´è¿‡çš„å¤„ç†å†…å­˜å›æ”¶é—®é¢˜çš„æ–¹æ³•--æ‰€æœ‰æƒæœºåˆ¶. é€šè¿‡ä¸€ç³»åˆ—çš„é™åˆ¶å’Œä½œç”¨åŸŸç®¡ç†,æŠŠè¯¥é‡Šæ”¾çš„åœ¨åˆé€‚çš„åœ°æ–¹éƒ½é‡Šæ”¾äº†. ä½†æ˜¯è¿™ä¸ªã€Œåˆé€‚ã€çš„æœ‰ç‚¹ä¸ç¬¦åˆä¹‹å‰æˆ‘è§è¿‡çš„è¯­è¨€çš„ä¹ æƒ¯. æ¯”å¦‚ä¸€ä¸ªå¯¹è±¡åªæ˜¯åœ¨ä¸€è¡Œä¹‹å†…ä½¿ç”¨ä¸€ä¸‹å’Œå®ƒç›¸å…³çš„å¼•ç”¨(ä¸å–å¾—æ‰€æœ‰æƒçš„æƒ…å†µä¸‹ä½¿ç”¨å€¼çš„ä¸œè¥¿),ä½†æ˜¯å› ä¸ºè¿™ç©æ„è¿™ä¸€è¡Œä¹‹åå°±ç»“æŸäº†,æ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠŠå®ƒé‡Šæ”¾æ‰,è¿™å°±å¯¼è‡´æ‚¬ç©ºå¼•ç”¨äº†. æ‰€ä»¥æœ‰æ—¶å€™æ•´è¿™ä¸œè¥¿è¿˜è¦ä»”ç»†è€ƒè™‘æ‰€æœ‰æƒçš„è½¬ç§».</p>
<p>ä¸ºäº†å­¦rust,ç´¢æ€§ç›´æ¥æŒ‘ä¸€ä¸ªæ¯”è¾ƒå¸¦åŠ²çš„é¡¹ç›®:ç›´æ¥ç”¨rustå®ç°ä¸€ä¸ªluaè§£é‡Šå™¨. çœ‹ç½‘ä¸Šæœ‰è¯´è‡ªå·±å®ç°äº†ä¸€ä¸ªrustè§£é‡Šå™¨,è¿˜æŒºç®€å•çš„,ä¹Ÿå°±å‡ ä¸‡è¡Œä»£ç . ä¸»è¦ä»–ä»¬ä½¿ç”¨çš„æ˜¯c/c++,ç›¸è¾ƒäºrustè¿˜æ˜¯å°‘äº†å¥½å¤šç‰¹æ€§. æ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥è¦å°‘ä¸€ç‚¹å§,å°±é€‰æ‹©äº†å®ç°è¿™ä¹ˆä¸ªç©æ„</p>
<p>å› ä¸ºè¿™æ¬¡å®ç°è¿™ç©æ„æ˜¯åŒæ—¶å­¦rust,lua,ç¼–è¯‘åŸç†. æ‰€ä»¥è‡ªé¡¹ç›®å¼€å§‹æˆ‘å°±ä¸€ç›´åœ¨å¤šçº¿ç¨‹æ‰§è¡ŒåŠ¨ä½œ. å½“ç„¶æˆ‘ä¹Ÿç¡®å®å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿,æ¯”å¦‚è¿™æ¬¡è™½ç„¶åªæ˜¯å®ç°äº†ä¸€ä¸ªè¯æ³•åˆ†æå™¨,æˆ‘éƒ½èŠ±äº†ä¸€ä¸ªæœˆ,ä¹‹åçš„å†…å®¹è¿˜é¥é¥æ— æœŸ,ä½†æ˜¯æˆ‘è¿˜æ˜¯å­¦åˆ°äº†å¥½å¤š,æ¯”å¦‚å®ç°ä¸€ä¸ªè¯æ³•åˆ†æå™¨çš„æ€è·¯,ä»¥åŠä¸€ä¸ªå…¶ä»–è¯­è¨€å¾ˆå°‘è§çš„ä¸œè¥¿--16è¿›åˆ¶å°æ•°. æˆ‘å½“æ—¶çœ‹åˆ°è¿™ç©æ„,ç›´æ¥å°±æ˜¯å§æ§½è¿˜èƒ½è¿™ä¹ˆç©.</p>
<p>å®é™…ä¸Šå¦‚æœåªæ˜¯è€ƒè™‘è¯æ³•åˆ†æå™¨çš„è¯,ä¸»è¦ä»»åŠ¡åªæœ‰åˆ†Token,æ ¹æœ¬ä¸éœ€è¦è€ƒè™‘åˆ«çš„ä»€ä¹ˆä¸œè¥¿. ä¹Ÿå°±æ˜¯è¯´ä»»åŠ¡åªæœ‰éå†æ¯ä¸ªå­—ç¬¦,ç„¶åè¯†åˆ«æ˜¯ä¸æ˜¯Tokenå°±å¥½äº†.</p>
<p>æ¯•ç«Ÿå‚è€ƒäº†äººå®¶çš„åº“,æ‰€ä»¥è¿™é‡Œè¿˜æ˜¯å¾—æŠŠå®ƒæ ‡æ³¨å‡ºæ¥:</p>
<p><strong>æœ¬é¡¹ç›®å‚è€ƒè‡ª:<a target="_blank" rel="noopener" href="https://github.com/lonng/lua-rs">lonng/lua-rs</a></strong></p>
<p>å…¨ç¨‹é£æ ¼æ›´åå‘äº<em>talk is cheap, show me your code</em>.æ‰€ä»¥è¯´è¯å¯èƒ½æ¯”è¾ƒå°‘,è´´ä»£ç å¯èƒ½æ¯”è¾ƒå¤š.</p>
<blockquote>
<p>æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯è°æƒ¯ä¸‹çš„æ¯›ç—…,ä¹Ÿè®¸æ˜¯å› ä¸ºé¢å¯¹è®ºæ–‡æ—¶ä¸çŸ¥é“è¯¥è¯´å•¥,å°±åŸºæœ¬ä¸Šå°±æ˜¯æŠŠè¦å¹²å•¥å’Œä»£ç å¹²äº†å•¥è¯´äº†ä¸€ä¸‹. æ–‡å­—éƒ¨åˆ†è¥å…»ä¸å¤š. å³ä½¿æˆ‘çŸ¥é“æˆ‘åº”è¯¥å…ˆæå‡ºç–‘é—®å†æå‡ºè§£å†³æ–¹æ¡ˆæœ€åå±•ç¤ºä»£ç è¿™æ ·çš„é¡ºåº,ä½†æ˜¯æˆ‘ä¸ä¼šè¯´è¯ğŸ˜¥. å¹¶ä¸”å†™è¿™ç©æ„å’Œå†™è®ºæ–‡ä¸ä¸€æ ·,æˆ‘å¤§å¯ä»¥åœ¨è¿™é‡Œéšä¾¿æŠ±æ€¨,ä½†åœ¨è®ºæ–‡é‡Œå°±ä¸è¡Œ.</p>
</blockquote>
<p>å¥½äº†æ­£ç‰‡å¼€å§‹:</p>
<h2 id="æ€è·¯å»ºç«‹">æ€è·¯å»ºç«‹</h2>
<p>æ…¢æ…¢æ‹†åˆ†,çœ‹çœ‹æœ‰å¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆä¸œè¥¿:</p>
<blockquote>
<p>è¿™é‡ŒæŒ‰ç…§æˆ‘è‡ªå·±å†™çš„å®é™…é¡ºåº,æ²¡æœ‰ä»»ä½•æ ‡å‡†,æœ€å¤šå¯èƒ½æ˜¯å‚è€ƒäº†lua-rsçš„é¡ºåº</p>
</blockquote>
<ul>
<li>å¤šè¡Œçš„<code>[===[something]===]</code>æ‹¬å·å¯¹(ç­‰å·æ•°é‡ä¸é™ä½†ä¸€å®šè¦ç­‰é•¿, æ³¨é‡Šæˆ–å¤šè¡Œå­—ç¬¦ä¸²)</li>
<li>å•è¡Œå­—ç¬¦ä¸²</li>
<li>2ä½16è¿›åˆ¶è½¬ä¹‰å­—ç¬¦</li>
<li>3ä½10è¿›åˆ¶è½¬ä¹‰å­—ç¬¦</li>
<li>æ•°å­—(10è¿›åˆ¶å’Œ16è¿›åˆ¶çš„å°æ•°)</li>
<li>ä¿ç•™å­—ç¬¦æˆ–æ ‡ç­¾(å˜é‡æˆ–è€…å‡½æ•°å)</li>
<li>å‰©ä¸‹çš„å†æœ‰å°±æ˜¯å„ç§æ‹¬å·ä¹‹ç±»çš„ç¬¦å·</li>
</ul>
<p>æ¥ä¸‹æ¥å°±æ˜¯å¯¹æ¯ç§å¯èƒ½çš„æƒ…å†µä¸€ä¸€å¤„ç†å°±å¥½äº†</p>
<h2 id="è§£æå™¨åº”è¯¥é•¿å•¥æ ·">è§£æå™¨åº”è¯¥é•¿å•¥æ ·</h2>
<p>é¦–å…ˆ,æ•´ä¸ªç»“æ„ä½“</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Lex</span>&lt;T: Read&gt; &#123;</span><br><span class="line">    reader: BufReader&lt;T&gt;, <span class="comment">//ç¼“å†²åŒºç”¨äºè¯»å–æºä»£ç </span></span><br><span class="line">    <span class="comment">// buffer: BytesMut,     //ç¼“å†²åŒºç”¨äºä¸´æ—¶å­˜æ”¾å¦‚å­—ç¬¦ä¸²æˆ–è€…nameç­‰å¤šå­—ç¬¦å†…å®¹</span></span><br><span class="line">    buffer: <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;,       <span class="comment">//Vecä»£æ›¿</span></span><br><span class="line">    line_number: <span class="type">u32</span>,      <span class="comment">//è¡Œå·</span></span><br><span class="line">    current: <span class="type">Option</span>&lt;<span class="type">char</span>&gt;, <span class="comment">//å½“å‰è¦å¤„ç†çš„å­—ç¬¦,è¿™æ ·ç›´æ¥å…¨ç±»å…¬ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>BytesMut</code>æ˜¯ä¹‹å‚è€ƒé¡¹ç›®ç”¨çš„,æˆ‘æ‡’å¾—æ”¹é…ç½®,å¹¶ä¸”çœ‹äº†ä¸€ä¸‹,è¿™ç©æ„å’Œ<code>Vec&lt;u8&gt;</code>åŸºæœ¬æ²¡å•¥åŒºåˆ«,æ‰€ä»¥å°±ç”¨Vecäº†</p>
<p>ç„¶åå°±æ˜¯å› ä¸ºæˆ‘æƒ³æŠŠå¯èƒ½é‡åˆ°çš„EOFå¤„ç†ä¸ºä¸€ä¸ªæ¸¸ç¦»äºcharä¹‹å¤–çš„ä¸œè¥¿,æƒ³åˆ°äº†<code>Option</code>,åŸç‰ˆåªæœ‰ä¸€ä¸ªchar,å¹¶ä¸”EOFå¤„ç†ä¸º0xff. ä½†æ˜¯ä¸ç®¡æ€ä¹ˆè¯´0xffä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦(<code>Ã¿</code>). è°çŸ¥é“å“ªå¤©å“ªä¸ªç”¨æˆ·æŠ½æŠ½äº†ç”¨äº†ä¸€ä¸‹è¿™ä¸ªå­—ç¬¦,å’”,å½“æˆEOFç›´æ¥é€€å‡ºäº†,é‚£å°±ç›´æ¥gg.</p>
<blockquote>
<p>ä¸è¿‡æˆ‘ä¹‹åå»æŸ¥äº†ä¸€ä¸‹,unicodeçš„0x10fffeå’Œ0x10ffffè¿™ä¸¤ä¸ªå­—ç¬¦å¹¶ä¸æ˜¯ç”¨äºæ˜¾ç¤ºçš„,ç”šè‡³ä»–ä»¬ä¿©çš„åå­—ç›´æ¥å°±æ˜¯<code>not a character</code>. è¿™ä¸å°±æ˜¯çº¯å¤©ç„¶çš„å¯ä»¥æ‹¿æ¥å½“EOFå¤„ç†çš„å¥½ä¸œè¥¿å—? åªä¸è¿‡ç­‰æˆ‘æŸ¥åˆ°è¿™ç©æ„çš„æ—¶å€™,æˆ‘å·²ç»å†™äº†ä¸€å¤§åŠäº†,å†æ”¹å°±åŸºæœ¬ä¸Šè·Ÿæ¨å€’é‡æ¥å·®ä¸å¤šäº†,æ‰€ä»¥æ²¡åŠ¨. ä¸è¿‡è¿™æ ·ä¹Ÿæœ‰å¥½å¤„,EOFè‚¯å®šä¸æ˜¯ä»»ä½•unicodeä¸Šçš„å­—ç¬¦,æ›´å®‰å…¨äº†.</p>
</blockquote>
<p>æ ¹æ®åŸç‰ˆå†…å®¹,<code>Lex</code>åªå‘å¤–æš´éœ²3ä¸ªå‡½æ•°:<code>new</code>,<code>line_number</code>,<code>next</code>(åŸç‰ˆè¯¥å‡½æ•°åå«<code>scan</code>). <code>new</code>å°±ä¸å¿…å¤šè¨€äº†,<code>line_number</code>è¿”å›å½“å‰è¡Œæ•°,è¿™æ ·çš„å¥½å¤„æ˜¯å¯¹å¤–è¡Œæ•°æ˜¯åªè¯»çš„. è¯æ³•åˆ†æå™¨çš„ç²¾é«“è¿˜æ˜¯åœ¨<code>next</code>å‡½æ•°ä¸Š</p>
<h2 id="nextå‡½æ•°"><code>next</code>å‡½æ•°</h2>
<p>è¿™ç©æ„å°±æ˜¯è´Ÿè´£å¾—åˆ°æ‰€æœ‰tokençš„,å‘å¤–æš´éœ²çš„æœ€ç›´æ¥çš„ä¸œè¥¿äº†. å®ƒä¹Ÿæ˜¯ä¸å…¶ä»–éå…¬å¼€æˆå‘˜å‡½æ•°è”ç³»æœ€ç´§çš„å‡½æ•°äº†.</p>
<p>æ—¢ç„¶æˆ‘ä»¬çš„æ€è·¯æ˜¯æŒ¨ä¸ªæ£€æŸ¥å­—ç¬¦åˆ¤æ–­token,é‚£é¦–å…ˆå°±æ˜¯ä¸€ä¸ªå¤§å¾ªç¯éå†æ¯ä¸€ä¸ªå­—ç¬¦, ç„¶åå°±æ˜¯<code>match</code>æ¯ä¸€ä¸ªå­—ç¬¦å¯èƒ½æ˜¯ä»€ä¹ˆ.</p>
<p>è¿˜æœ‰,<code>match</code>çš„è‚¯å®šæ˜¯<code>current</code>è€Œè¿™ç©æ„æ˜¯ä¸ª<code>Option</code>,æ‰€ä»¥è¯¦ç»†çš„åˆ¤æ–­è¿˜å¾—æ”¾åˆ°<code>Some(...)</code>åˆ†æ”¯ä¸‹.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">next</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> ResultE&lt;Token&gt; &#123;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">            <span class="literal">None</span> =&gt; <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::Eof), <span class="comment">//è¿™é‡Œå¥½åƒç”¨breakä¹Ÿè¡Œ?</span></span><br><span class="line">            <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                <span class="keyword">match</span> c&#123;...&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äº†è¿™é‡Œå¿˜äº†æä¸€å˜´:<code>ResultE&lt;T&gt; = Result&lt;T, Errors&gt;</code>,å…¶ä¸­<code>Errors</code>æ˜¯è‡ªå®šä¹‰é”™è¯¯. è¿™æ ·ä¹Ÿæ–¹ä¾¿å†™,åŸç‰ˆçš„ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„.</p>
<p>ç©ºç™½å­—ç¬¦å½“ç„¶æ˜¯è¦å…¨è·³è¿‡çš„å•¦,æ‰€ä»¥</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INIT | <span class="string">&#x27; &#x27;</span> | <span class="string">&#x27;\t&#x27;</span> | &#x27;\u&#123;<span class="number">000</span>B&#125;&#x27; | &#x27;\u&#123;<span class="number">000</span>C&#125;&#x27; =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>(),</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>INIT</code>æ˜¯<code>'\0'</code>ä½†æ˜¯è¿™ä¹ˆæ‰“æ‰‹æŒ‡å¾—è·³æ¥è·³å»,æ¯”è¾ƒéº»çƒ¦,æ‰€ä»¥ç›´æ¥å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡.</p>
</blockquote>
<p>å›è½¦å’Œæ¢è¡Œè¡¨ç¤ºæ¢è¡Œäº†,è¦å¢åŠ è¡Œæ•°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;\r&#x27;</span> | <span class="string">&#x27;\n&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">inc_line_number</span>(),</span><br></pre></td></tr></table></figure>
<p>é‡åˆ°<code>-</code>å¼€å¤´çš„æ—¶å€™å¯èƒ½æœ‰2ç§æƒ…å†µ:å‡å·æˆ–è€…æ³¨é‡Š,è€Œæ³¨é‡Šåˆåˆ†ä¸¤ç§æƒ…å†µ:å•è¡Œå’Œå¤šè¡Œ.</p>
<blockquote>
<p>luaè¿˜æ ‡æ–°ç«‹å¼‚çš„æ‹¿å‡å·åšæ³¨é‡Šçš„ç¬¦å·,ä½ è¯´ä½ åƒpythonåŒæ–œçº¿è¡¨ç¤ºæ•´å‡º,æˆ‘èƒ½ç†è§£. ä½†æ˜¯ä¸ºä»€ä¹ˆæ±‚é•¿åº¦è¿˜è¦ä¸“é—¨æ•´ä¸€ä¸ªç¬¦å·å•Š! ç›´æ¥ç”¨å‡½æ•°ä¸å¥½å˜›?</p>
</blockquote>
<p>æ³¨é‡Šæ—¶æœ‰ä¸¤ä¸ªå‡å·åœ¨ä¸€å—,æ‰€ä»¥åªæœ‰ä¸€ä¸ªå‡å·çš„æƒ…å†µä¸‹å°±æ˜¯å‡å·</p>
<p>å¦‚æœæœ‰ä¸¤ä¸ªå‡å·,å°±è¯´æ˜æ˜¯æ³¨é‡Š,åˆæœ‰ä¸¤ä¸ªåˆ†æ”¯:å¦‚æœåé¢è·Ÿç€ä¸€ä¸ªä¸­æ‹¬å·é‚£å°±æ˜¯å¤šè¡Œæ³¨é‡Š,åä¹‹å•è¡Œæ³¨é‡Š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;-&#x27;</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="comment">//å¦‚æœä¸‹ä¸€ä¸ªä¸æ˜¯å‡å·é‚£ä¹ˆå°±ç¡®å®šäº†è¿™åªæ˜¯ä¸ªå‡å·</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.current != <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::Sub);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœèµ°è¿‡äº†è¿™ä¸ªif(å³ä¸‹ä¸€ä¸ªè¿˜æ˜¯å‡å·),é‚£ä¹ˆæ­¤æ—¶æ˜¯æ³¨é‡Š</span></span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="comment">//å¦‚æœåé¢è·Ÿäº†ä¸ªä¸­æ‹¬å·,é‚£å°±æ˜¯å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.current == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;[&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">sep</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">skip_sep</span>();</span><br><span class="line">        <span class="keyword">if</span> sep &gt;= <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">read_multi_line</span>(<span class="literal">true</span>, sep)?;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœè¿˜ä¸æ˜¯,é‚£å°±åªæ˜¯ä¸€ä¸ªå•çº¯çš„å•è¡Œæ³¨é‡Š</span></span><br><span class="line">    <span class="keyword">while</span> !<span class="keyword">self</span>.current.<span class="title function_ invoke__">is_none</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="title function_ invoke__">is_new_line</span>(<span class="keyword">self</span>.current.<span class="title function_ invoke__">unwrap</span>()) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸­æ‹¬å·ä¹Ÿå¯¹åº”ä¸¤ç§æƒ…å†µ:å¤šè¡Œå­—ç¬¦ä¸²å’Œå•çº¯çš„ä¸­æ‹¬å·(æ³¨é‡Šçš„æƒ…å†µå·²ç»åœ¨ä¸Šé¢å¤„ç†è¿‡äº†). å¦‚æœäºŒè€…éƒ½ä¸æ˜¯è€Œå‡ºç°äº†å…¶ä»–æƒ…å†µ(skip_sepä¸è®¤è¯†çš„)é‚£åº”è¯¥å°±æ˜¯å‡ºé”™äº†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;[&#x27;</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">sep</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">skip_sep</span>();</span><br><span class="line">    <span class="keyword">if</span> sep &gt;= <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::<span class="title function_ invoke__">String</span>(<span class="keyword">self</span>.<span class="title function_ invoke__">read_multi_line</span>(<span class="literal">false</span>, sep)?));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">    <span class="keyword">if</span> sep == -<span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::SqrL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">        <span class="string">&quot;invalid long string delimiter&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç­‰å·ä¹Ÿåˆ†ä¸¤ç§æƒ…å†µ:èµ‹å€¼å’Œåˆ¤æ–­ç›¸ç­‰,ä½†æ˜¯è¿™ä¸œè¥¿ä¼šç®€å•çš„å¤š</p>
<p>å…¶ä»–çš„ç¬¦å·å¦‚<code>&lt;</code>,<code>~</code>,<code>:</code>,<code>/</code>ç­‰å’Œè¿™ç©æ„çš„é€»è¾‘åŸºæœ¬ä¸€æ ·</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;=&#x27;</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.current != <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;=&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::Assign);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å¦‚æœadvanceä¸€ä¸ªä¸æ˜¯ç­‰å·é‚£å°±æ˜¯Assign</span></span><br><span class="line"><span class="comment">    èµ°ä¸åˆ°ç¬¬äºŒä¸ªadvance</span></span><br><span class="line"><span class="comment">    å¦‚æœè·³è¿‡äº†è¿™éƒ¨åˆ†çš„çš„åˆ¤æ–­é‚£å°±è¯´æ˜æœ‰ä¸¤ä¸ªç­‰å·</span></span><br><span class="line"><span class="comment">    ä¹Ÿå°±æ˜¯åˆ¤æ–­ç›¸ç­‰çš„ç¬¦å·</span></span><br><span class="line"><span class="comment">    æ­¤æ—¶å¿…é¡»èµ°è¿‡ç¬¬äºŒæ¬¡advance</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::<span class="built_in">Eq</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡è§å¼•å·é‚£å°±æ˜¯å­—ç¬¦ä¸²äº†. è¿™ä¸ªå¯èƒ½è¦ç‰¹æ®Šå¤„ç†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&quot;&#x27;</span> | <span class="string">&#x27;\&#x27;&#x27;</span> =&gt; <span class="keyword">return</span> <span class="keyword">self</span>.<span class="title function_ invoke__">read_string</span>(),</span><br></pre></td></tr></table></figure>
<p>luaä¸æ”¯æŒ<code>+=</code>è¿™æ ·çš„ç¬¦å·,æ‰€ä»¥å¤„ç†<code>+</code>è¿™ç±»ç¬¦å·å°±æ›´ç®€å•äº†<br>
ç±»ä¼¼çš„æœ‰<code>*</code>,<code>%</code>,é™¤<code>[</code>çš„å…¶ä»–æ‹¬å·,<code>;</code>,<code>,</code>ç­‰</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;+&#x27;</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::Add);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>.</code>è™½ç„¶ä¹Ÿä¼šé‡åˆ°æƒ³ä¸Šé¢è¿™ç§ä¸å…¶ä»–ç¬¦å·è¿åœ¨ä¸€èµ·è¡¨ç¤ºå…¶ä»–å«ä¹‰çš„,ä½†æ˜¯å®ƒè¿˜æœ‰ä¸€ä¸ªä½œç”¨:å°æ•°ç‚¹. ä¹Ÿå°±æ˜¯è¯´<code>.123</code>è¿™æ ·è¡¨ç¤ºå°æ•°æ˜¯åˆæ³•çš„.æ‰€æœ‰çš„æ¯”å…¶ä»–çš„è¿˜è¦å¤šä¸€å±‚åˆ¤æ–­</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;.&#x27;</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.<span class="title function_ invoke__">check_next</span>(<span class="string">&quot;.&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">t</span> = <span class="keyword">if</span> <span class="keyword">self</span>.<span class="title function_ invoke__">check_next</span>(<span class="string">&quot;.&quot;</span>) &#123;</span><br><span class="line">            Token::Dots</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Token::Concat</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(t);</span><br><span class="line">    <span class="comment">// &#125; else if !self.current.expect(&quot;unexpected EOF&quot;).is_ascii_digit() /*è¿™é‡Œexpectä¼šè¢«è§¦å‘å—??*/&#123;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(d) = <span class="keyword">self</span>.current &#123;</span><br><span class="line">        <span class="keyword">if</span> d.<span class="title function_ invoke__">is_ascii_digit</span>() &#123;</span><br><span class="line">            <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::Dot);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.<span class="title function_ invoke__">read_number</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æœ‰å‰©ä¸‹çš„æƒ…å†µé‚£å°±åŸºæœ¬ä¸Šæ˜¯:</p>
<ul>
<li>æ•°å­—</li>
<li>å˜é‡æˆ–è€…å‡½æ•°å</li>
<li>ä¿ç•™å­—</li>
</ul>
<p>ä¸€å—å¤„ç†äº†,æ¯•ç«Ÿè¿™ç©æ„ä¸å¤ªå¥½å†™æˆ<code>match</code>çš„æ¡ä»¶</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">_ =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">c</span> = <span class="keyword">self</span>.current.<span class="title function_ invoke__">expect</span>(<span class="string">&quot;unexpected EOF&quot;</span>); <span class="comment">//è¿™é‡Œä¼šè¢«è§¦å‘å—?</span></span><br><span class="line">    <span class="keyword">if</span> c.<span class="title function_ invoke__">is_digit</span>(<span class="number">10</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.<span class="title function_ invoke__">read_number</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> c == <span class="string">&#x27;_&#x27;</span> || c.<span class="title function_ invoke__">is_ascii_alphabetic</span>() &#123;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="literal">None</span> =&gt; <span class="keyword">break</span>,</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> c != <span class="string">&#x27;_&#x27;</span> &amp;&amp; !c.<span class="title function_ invoke__">is_ascii_alphanumeric</span>() &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.<span class="title function_ invoke__">reserved_or_name</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="comment">//è¿™ç©æ„èƒ½æŒ‡ä»£çš„ä¸œè¥¿å¤ªå®½æ³›äº†</span></span><br><span class="line">    <span class="comment">//æ‰€æœ‰çš„æ¯”å¦‚åŠ å·æ‹¬å·ä¹˜å·å•¥çš„å…¨åœ¨è¿™é‡Œ</span></span><br><span class="line">    <span class="comment">//ç°åœ¨æˆ‘æŠŠèƒ½æ”¹æˆä¸“é—¨tokençš„éƒ½æ”¹æˆä¸“é—¨çš„äº†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::<span class="title function_ invoke__">Char</span>(c));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±è¯¥çœ‹å„ç§å‡½æ•°äº†</p>
<h2 id="advance-saveç­‰å‡½æ•°åŠå…¶è¡ç”Ÿå‡½æ•°"><code>advance</code>,<code>save</code>ç­‰å‡½æ•°åŠå…¶è¡ç”Ÿå‡½æ•°</h2>
<p>åºŸè¯å°‘è¯´: <code>advance</code>ä»<code>reader</code>è¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦å¹¶è®¾ç½®ä¸º<code>current</code>, <code>save</code>å°†ç»™å®šå­—ç¬¦ä¿å­˜åœ¨<code>buffer</code>, <code>inc_line_number</code>è¡Œæ•°+1, <code>buf_string</code>å°†<code>buffer</code>å†…å®¹è¾“å‡ºä¸ºå­—ç¬¦ä¸².</p>
<p><code>save</code>å’Œ<code>advance</code>æœ‰ç»“åˆ,å› ä¸ºæœ‰<code>advance</code>æ‰€ä»¥ä¸å†èµ˜è¿°,é¡ºåºä¸å‡½æ•°ç›¸åŒ:<code>save_n_advance</code>ä¿å­˜<code>current</code>,<code>advance_n_save</code>ä¿å­˜æŒ‡å®šå­—ç¬¦.</p>
<h2 id="skip-sep"><code>skip_sep</code></h2>
<p>è¿™ç©æ„æ˜¯æˆ‘è§åˆ°çš„ç¬¬ä¸€ä¸ªéå…¬å¼€å‡½æ•°. è¿™ç©æ„é¦–æ¬¡å‡ºç°æ˜¯åœ¨å¤„ç†ä¸­æ‹¬å·çš„æ—¶å€™å¤„ç†å¤šè¡Œå­—ç¬¦ä¸²æˆ–è€…å¤šè¡Œæ³¨é‡Šæ—¶ç”¨çš„. å®ƒçš„ä½œç”¨æ˜¯è®©<code>current</code>è·³è¿‡æ‹¬å·å’Œä¸­é—´å¤¹ç€çš„ç­‰å·å¹¶ç»Ÿè®¡ç­‰å·é•¿åº¦ç”¨äºåŒ¹é…æ‹¬å·ä»¥åŠåˆ¤æ–­æ‹¬å·çš„ä½¿ç”¨æ˜¯å¦åˆæ³•</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">skip_sep</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">isize</span> &#123;</span><br><span class="line">        <span class="comment">//æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆå®ƒè¦è¿ç€æ‹¬å·ä¸€èµ·ä¿å­˜</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cnt</span>: <span class="type">isize</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">c</span> = <span class="keyword">self</span>.current.<span class="title function_ invoke__">expect</span>(<span class="string">&quot;unexpected EOF&quot;</span>);</span><br><span class="line">        <span class="built_in">debug_assert!</span>(c == <span class="string">&#x27;[&#x27;</span> || c == <span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">self</span>.current == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;=&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">            cnt += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.current.<span class="title function_ invoke__">is_some</span>() &#123;</span><br><span class="line">            <span class="comment">//éNone</span></span><br><span class="line">            cnt</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            -cnt - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="read-string"><code>read_string</code></h2>
<p>é¡¾åæ€ä¹‰,è¯»å­—ç¬¦ä¸². ä½†æ˜¯ä»…é™äºå•è¡Œå­—ç¬¦ä¸²,å› ä¸ºå¤šè¡Œå­—ç¬¦ä¸²å’Œå¤šè¡Œæ³¨é‡Šé™¤äº†æ³¨é‡Šç¬¦å·å¤–ä¸€æ ·,æ‰€ä»¥è¿™ä¸¤ä¸ªæ”¾ä¸€å—å¤„ç†æœ€åˆé€‚äº†.</p>
<p>ä¸è¿‡è¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªé—®é¢˜:å¯¹äº<code>Option</code>çš„å±•å¼€æˆ‘ç”¨äº†<code>expect</code>,ä¹Ÿå°±æ˜¯è¯´å‡ºé”™äº†å°±ç›´æ¥panic. ä¸è¿‡æˆ‘ä¸€æ—¶åŠä¼šç¡®å®æƒ³ä¸åˆ°æœ‰ä»€ä¹ˆæç«¯çš„ä¾‹å­èƒ½è§¦å‘è¿™ä¸ª<code>expect</code>äº†. è€Œä¸”å¦‚æœçœŸæ¢æˆæ­£ç»åˆ¤æ–­,æˆ‘è¿˜ä¸çŸ¥é“è¯¥å’‹æ”¹ğŸ˜…</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_string</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> ResultE&lt;Token&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">delimiter</span> = <span class="keyword">self</span>.current.<span class="title function_ invoke__">expect</span>(<span class="string">&quot;unexpected EOF&quot;</span>);</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">        <span class="comment">//å¼€å§‹è¿›å­—ç¬¦ä¸²è¯»å­—ç¬¦äº†</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">self</span>.current.<span class="title function_ invoke__">expect</span>(<span class="string">&quot;unexpected EOF while reading string&quot;</span>) != delimiter &#123;</span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="literal">None</span> =&gt; <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;unfinished string&quot;</span>.<span class="title function_ invoke__">to_string</span>())),</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">match</span> c &#123;</span><br><span class="line">                        <span class="string">&#x27;\n&#x27;</span> | <span class="string">&#x27;\r&#x27;</span> =&gt; &#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;unfinished string&quot;</span>.<span class="title function_ invoke__">to_string</span>()))</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="string">&#x27;\\&#x27;</span> =&gt; &#123;</span><br><span class="line">                            <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">                            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                                <span class="literal">None</span> =&gt; &#123;&#125; <span class="comment">//EOFä»€ä¹ˆéƒ½ä¸åš</span></span><br><span class="line">                                <span class="title function_ invoke__">Some</span>(esc) =&gt; <span class="keyword">match</span> esc &#123;</span><br><span class="line">                                    <span class="string">&#x27;a&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">0007</span>&#125;&#x27;),  <span class="comment">//å“é“ƒ</span></span><br><span class="line">                                    <span class="string">&#x27;b&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">0008</span>&#125;&#x27;),  <span class="comment">//é€€æ ¼</span></span><br><span class="line">                                    <span class="string">&#x27;f&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">000</span>C&#125;&#x27;),  <span class="comment">//æ¢é¡µ</span></span><br><span class="line">                                    <span class="string">&#x27;n&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">000</span>A&#125;&#x27;),  <span class="comment">//æ¢è¡Œ</span></span><br><span class="line">                                    <span class="string">&#x27;r&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">000</span>D&#125;&#x27;),  <span class="comment">//å›è½¦</span></span><br><span class="line">                                    <span class="string">&#x27;t&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">0009</span>&#125;&#x27;),  <span class="comment">//æ°´å¹³åˆ¶è¡¨ç¬¦</span></span><br><span class="line">                                    <span class="string">&#x27;v&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">000</span>b&#125;&#x27;),  <span class="comment">//å‚ç›´åˆ¶è¡¨ç¬¦</span></span><br><span class="line">                                    <span class="string">&#x27;\\&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">005</span>c&#125;&#x27;), <span class="comment">//æ–œæ </span></span><br><span class="line">                                    <span class="string">&#x27;\&#x27;&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">0027</span>&#125;&#x27;), <span class="comment">//å•å¼•å·</span></span><br><span class="line">                                    <span class="string">&#x27;&quot;&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance_n_save</span>(&#x27;\u&#123;<span class="number">0022</span>&#125;&#x27;),  <span class="comment">//åŒå¼•å·</span></span><br><span class="line">                                    <span class="string">&#x27;\r&#x27;</span> | <span class="string">&#x27;\n&#x27;</span> =&gt; &#123;</span><br><span class="line">                                        <span class="comment">//è¿™é‡Œæœ‰ä¸ªincr_line_number</span></span><br><span class="line">                                        <span class="keyword">self</span>.<span class="title function_ invoke__">inc_line_number</span>();</span><br><span class="line">                                        <span class="keyword">self</span>.<span class="title function_ invoke__">save</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                    <span class="comment">//è¿™é‡ŒåŸæ¥é€»è¾‘æ˜¯ _ if current == &#x27;x&#x27; =&gt;&#123;...&#125;</span></span><br><span class="line">                                    <span class="string">&#x27;x&#x27;</span> =&gt; &#123;</span><br><span class="line">                                        dbg!(<span class="keyword">self</span>.current);</span><br><span class="line">                                        <span class="keyword">let</span> <span class="variable">hex_esc</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">read_hex_escape</span>()?;</span><br><span class="line">                                        <span class="keyword">self</span>.<span class="title function_ invoke__">save</span>(hex_esc);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                    _ =&gt; &#123;</span><br><span class="line">                                        <span class="keyword">if</span> !<span class="title function_ invoke__">is_decimal</span>(esc) &#123;</span><br><span class="line">                                            <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                                                <span class="string">&quot;invalid escape sequence&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">                                            ));</span><br><span class="line">                                        &#125;</span><br><span class="line">                                        <span class="keyword">let</span> <span class="variable">dec_esc</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">read_dec_escape</span>()?;</span><br><span class="line">                                        <span class="keyword">self</span>.<span class="title function_ invoke__">save</span>(dec_esc);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;,</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        _ =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>(),</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¯»å®Œäº†</span></span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>(); <span class="comment">//æŒªåˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦,è·³è¿‡å¦ä¸€ä¸ªå¼•å·</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">ret</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">buf_string</span>()?;</span><br><span class="line">        <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::<span class="title function_ invoke__">String</span>(ret));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="read-hex-escape-read-dec-escape"><code>read_hex_escape</code> &amp; <code>read_dec_escape</code></h2>
<p>è½¬ä¹‰å­—ç¬¦æ€»å¾—å¤„ç†å§. åƒä»€ä¹ˆæ¢è¡Œå•¦,åˆ¶è¡¨ç¬¦å•¦çˆ±æ¥ç™½æ¥çš„æ€»ä¸èƒ½æ²¡æœ‰å§.</p>
<p>ä¸è¿‡æœ‰ä¸ªé—®é¢˜,rustå¯¹å­—ç¬¦ä¸²çš„parseå‡½æ•°åŸç”Ÿä¸æ”¯æŒ16è¿›åˆ¶å­—ç¬¦ä¸²,æ‰€ä»¥è¿™é‡Œéœ€è¦è‡ªå·±å®ç°ä¸€ä¸ª. æ®è¯´å®æ¯”å‡½æ•°å¿«,æ‰€ä»¥è¿™é‡Œç”¨å®å®ç°.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// å¤„ç†ä¸€ä½16è¿›åˆ¶æ•°å­—,é»˜è®¤ç»“æœä¸ºu8</span></span><br><span class="line"><span class="built_in">macro_rules!</span> matchhex &#123;</span><br><span class="line">    ($matches:expr, $otherwise:expr $(,$typ:ty)?) =&gt; &#123;</span><br><span class="line">        <span class="keyword">match</span> $matches &#123;</span><br><span class="line">            <span class="string">&#x27;0&#x27;</span>..=<span class="string">&#x27;9&#x27;</span> =&gt; $matches <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)? - <span class="string">&#x27;0&#x27;</span> <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)?,</span><br><span class="line">            <span class="string">&#x27;a&#x27;</span>..=<span class="string">&#x27;f&#x27;</span> =&gt; $matches <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)? - <span class="string">&#x27;a&#x27;</span> <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)? + <span class="number">10</span>,</span><br><span class="line">            <span class="string">&#x27;A&#x27;</span>..=<span class="string">&#x27;F&#x27;</span> =&gt; $matches <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)? - <span class="string">&#x27;A&#x27;</span> <span class="keyword">as</span> <span class="type">u8</span> $(<span class="keyword">as</span> $typ)? + <span class="number">10</span>,</span><br><span class="line">            _ =&gt; $otherwise,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·è§£æ16è¿›åˆ¶çš„æ´»å°±è½»æ¾ç‚¹äº†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_hex_escape</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> ResultE&lt;<span class="type">char</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">r</span>: <span class="type">u8</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">            i += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">2</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="comment">// println!(&quot;&#x27;&#123;c&#125;&#x27;, &#123;&#125;&quot;, c as u8);</span></span><br><span class="line">                    <span class="keyword">let</span> <span class="variable">cvalue</span> = matchhex!(c, &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                            <span class="string">&quot;hexadecimal digit expected in match&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">                        ));</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// self.advance();</span></span><br><span class="line">                    r = r * <span class="number">16</span> + cvalue;</span><br><span class="line">                    <span class="comment">// println!(&quot;&#123;r&#125;&quot;);</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                        <span class="string">&quot;hexadecimal digit expected in loop&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">                    ))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(r <span class="keyword">as</span> <span class="type">char</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸ŠäºŒè€…é€»è¾‘å·®ä¸å¤š,åªä¸è¿‡æ˜¯ä¸€äº›ç»†èŠ‚ä¸Šçš„å˜åŒ–. æ¯”å¦‚3ä½æ•°,å¹¶ä¸”éœ€è¦è€ƒè™‘3ä½10è¿›åˆ¶å¯èƒ½è¶…è¿‡255ä¹‹ç±»çš„é—®é¢˜.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_dec_escape</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> ResultE&lt;<span class="type">char</span>&gt; &#123;</span><br><span class="line">        <span class="comment">//å› ä¸ºluaç›´æ¥ä½¿ç”¨è‡³å¤š3ä½10è¿›åˆ¶,é™¤äº†æ–œæ ä¹‹å¤–æ²¡æœ‰åˆ«çš„ä¸œè¥¿äº†,æ‰€ä»¥è¿™é‡Œä¸éœ€è¦æå‰advance</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">r</span>: <span class="type">u16</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="comment">// dbg!(self.current);</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.current.<span class="title function_ invoke__">is_none</span>() &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">3</span> || !<span class="title function_ invoke__">is_decimal</span>(<span class="keyword">self</span>.current.<span class="title function_ invoke__">unwrap</span>()) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">let</span> <span class="variable">cvalue</span> = c <span class="keyword">as</span> <span class="type">u16</span> - <span class="string">&#x27;0&#x27;</span> <span class="keyword">as</span> <span class="type">u16</span>;</span><br><span class="line">                    r = r * <span class="number">10</span> + cvalue;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                        <span class="string">&quot;decimal digit expected in loop&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">                    ))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>(); <span class="comment">//è¿™ä¸ªåº”è¯¥å¤„ç†å®Œå†advance,ä¸ç„¶ä¼šè·³è¿‡ç¬¬ä¸€ä¸ªæ•°å­—</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// dbg!(r);</span></span><br><span class="line">        <span class="keyword">if</span> r &gt; (<span class="type">u8</span>::MAX <span class="keyword">as</span> <span class="type">u16</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;decimal escape too large&quot;</span>.<span class="title function_ invoke__">to_string</span>()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(r <span class="keyword">as</span> <span class="type">u8</span> <span class="keyword">as</span> <span class="type">char</span>) <span class="comment">//åªæœ‰u8èƒ½castæˆchar,å…¶ä»–éƒ½ä¸è¡Œ</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¯´èµ·æ¥ä¹Ÿå¥‡å¦™å¥¥,è½¬ä¹‰å­—ç¬¦åªæ”¯æŒåˆ°255,å¯¹äºæ•´ä¸ªunicodeé‚£æ˜¯è¿æ•°é‡çº§éƒ½å·®äº†å¥½å‡ ä½å•Š,å¯¹äºä¸€äº›ä¸å¥½è¾“å…¥çš„ä¸œè¥¿å’‹å¤„ç†å‘¢?</p>
<h2 id="read-multi-line"><code>read_multi_line</code></h2>
<p>å¤šè¡Œå­—ç¬¦ä¸²æˆ–å¤šè¡Œæ³¨é‡Š</p>
<p>æˆ‘æ„Ÿè§‰èƒ½è¯´çš„ä¸å¤ªå¤š,å› ä¸ºæˆ‘æƒ³è¯´çš„æ³¨é‡Šé‡ŒåŸºæœ¬éƒ½è¯´äº†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_multi_line</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, is_comment: <span class="type">bool</span>, sep: <span class="type">isize</span>) <span class="punctuation">-&gt;</span> ResultE&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">        <span class="comment">//å¾—ç¡®ä¿æœ‰</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.current.<span class="title function_ invoke__">is_some</span>() &#123;</span><br><span class="line">            <span class="comment">//å†åˆ¤æ–­æ˜¯ä¸æ˜¯æ¢è¡Œ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="title function_ invoke__">is_new_line</span>(<span class="keyword">self</span>.current.<span class="title function_ invoke__">unwrap</span>()) &#123;</span><br><span class="line">                <span class="keyword">self</span>.<span class="title function_ invoke__">inc_line_number</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> is_comment &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;unfinished long comment&quot;</span>.<span class="title function_ invoke__">to_string</span>()));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;unfinished long string&quot;</span>.<span class="title function_ invoke__">to_string</span>()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">match</span> c &#123;</span><br><span class="line">                        <span class="string">&#x27;]&#x27;</span> =&gt; &#123;</span><br><span class="line">                            <span class="keyword">let</span> <span class="variable">sep2</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">skip_sep</span>(); <span class="comment">//ä¸¤è¾¹æ‹¬å·å±…ç„¶åˆ†å¼€å¤„ç†çš„?</span></span><br><span class="line">                            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">ret</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line"></span><br><span class="line">                            <span class="comment">//æˆ‘å°±è¯´ä¸¤è¾¹ç­‰å·åº”è¯¥æ˜¯ç­‰é•¿çš„</span></span><br><span class="line">                            <span class="keyword">if</span> sep == sep2 &#123;</span><br><span class="line">                                <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">                                <span class="keyword">if</span> !is_comment &#123;</span><br><span class="line">                                    <span class="keyword">let</span> <span class="variable">buf_len</span> = <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">len</span>();</span><br><span class="line">                                    <span class="comment">//è¿™é‡Œåº”è¯¥æ€ä¹ˆå¤„ç†?</span></span><br><span class="line">                                    <span class="comment">//å¦å¤–è¿˜è¦æ³¨æ„ä¸€ç‚¹,from_utf8è¦å¤ºæƒ,æ‰€ä»¥è¦å…‹éš†æˆ–è€…åˆ‡ç‰‡æˆ–è€…åˆ«çš„ä»€ä¹ˆæ‰‹æ®µè¦å¤„ç†</span></span><br><span class="line">                                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                                    è¿™é‡Œåˆ‡ç‰‡çš„é€»è¾‘æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment">                                    ç”±äºå®ƒä¿å­˜çš„å†…å®¹æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment">                                    å¯¹äºå­—ç¬¦ä¸²ã€Œ&quot;[====[some_str]====]abcde&quot;ã€</span></span><br><span class="line"><span class="comment">                                    è¯¥å‡½æ•°ä¿å­˜çš„æ˜¯ã€Œ&quot;[====[some_str]====]&quot;ã€</span></span><br><span class="line"><span class="comment">                                    æ‰€ä»¥è¿™é‡Œéœ€è¦çš„æ˜¯æŠŠä¸¤è¾¹æ‹¬å·å’Œç­‰å·å»æ‰</span></span><br><span class="line"><span class="comment">                                    æŒºç®€å•:å¤´ä¸Šç­‰å·æ•°é‡ç”±skip_sepå‡½æ•°ç»™å‡º,åœ¨åŠ ä¸Šä¸¤ä¸ªæ‹¬å·</span></span><br><span class="line"><span class="comment">                                    æ‰€ä»¥ä»sep+2åˆ°buf_len-2-sep</span></span><br><span class="line"><span class="comment">                                    ä¸è¿‡æ—¢ç„¶è¦åˆ‡ç‰‡,é‚£ä¸ºä»€ä¹ˆè¿˜è¦æŠŠç­‰å·é‚£ä¸€å †ä¸œè¥¿ä¿å­˜ä¸‹æ¥?</span></span><br><span class="line"><span class="comment">                                    */</span></span><br><span class="line">                                    ret = <span class="type">String</span>::<span class="title function_ invoke__">from_utf8</span>(</span><br><span class="line">                                        <span class="keyword">self</span>.buffer</span><br><span class="line">                                            [(<span class="number">2</span> + sep) <span class="keyword">as</span> <span class="type">usize</span>..(buf_len - <span class="number">2</span> - sep <span class="keyword">as</span> <span class="type">usize</span>)]</span><br><span class="line">                                            .<span class="title function_ invoke__">to_vec</span>(),</span><br><span class="line">                                    )?;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">                                <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(ret);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//ä¸ç­‰é•¿å°±ç»§ç»­ç­‰,ç»§ç»­å¾ªç¯</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="string">&#x27;\r&#x27;</span> =&gt; <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>(), <span class="comment">//å›è½¦å°±ä¸ä¿å­˜?</span></span><br><span class="line">                        <span class="string">&#x27;\n&#x27;</span> =&gt; &#123;</span><br><span class="line">                            <span class="comment">// let curr = self.current.unwrap();</span></span><br><span class="line">                            <span class="comment">// self.save(curr);</span></span><br><span class="line">                            <span class="comment">// ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½ç›´æ¥è¿™æ ·?</span></span><br><span class="line">                            <span class="keyword">self</span>.<span class="title function_ invoke__">save</span>(c);</span><br><span class="line">                            <span class="keyword">self</span>.<span class="title function_ invoke__">inc_line_number</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                        _ =&gt; &#123;</span><br><span class="line">                            <span class="keyword">if</span> !is_comment &#123;</span><br><span class="line">                                <span class="comment">// let curr = self.current.unwrap();</span></span><br><span class="line">                                <span class="comment">// self.save(curr);</span></span><br><span class="line">                                <span class="comment">//ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½ç›´æ¥è¿™æ ·?</span></span><br><span class="line">                                <span class="keyword">self</span>.<span class="title function_ invoke__">save</span>(c)</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="check-next-read-digits"><code>check_next</code> &amp; <code>read_digits</code></h2>
<p>è¿™ä¿©å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§è¾…åŠ©å‡½æ•°.</p>
<p>å…ˆä»å¥½è¯´çš„å¼€å§‹: <code>read_digits</code>è¯»æ•°å­—å¹¶ä¿å­˜åˆ°<code>buffer</code>,ç„¶åå†è¿”å›æœ¬è½®æ£€æµ‹æœ€åä¸€ä¸ªæ•°å­—ä¹‹åçš„å†…ä¸ªå­—ç¬¦. æ²¡äº†</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_digits</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">char</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="comment">// if !is_decimal(self.current.unwrap()) &#123;</span></span><br><span class="line">            <span class="comment">//     break;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> !<span class="title function_ invoke__">is_decimal</span>(c) &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="literal">None</span> =&gt; <span class="keyword">break</span>,</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// self.current.unwrap()</span></span><br><span class="line">        <span class="keyword">self</span>.current</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æ˜¯ç¨å¾®æœ‰ç‚¹å¤æ‚çš„:<code>check_next</code>. è™½ç„¶æ ¹æ®åå­—èƒ½çŒœåˆ°åˆ¤æ–­ä¸‹ä¸€ä¸ªå­—ç¬¦,ä½†å®é™…ä¸Šæ£€æŸ¥çš„å½“å‰çš„<code>current</code>,å› ä¸ºåŸç‰ˆçš„é€»è¾‘æ˜¯è¿™æ ·çš„:æ¯æ¬¡å…ˆä¿å­˜äº†å½“å‰å˜é‡å¾…å¤„ç†åadvance,é‚£ä¹ˆæ­¤æ—¶<code>current</code>è‡ªç„¶å°±æ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„å­—ç¬¦çš„ä¸‹ä¸€ä¸ªå­—ç¬¦äº†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">check_next</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, s: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="comment">// if self.current == Some(INIT) || !s.contains(self.current.unwrap()) &#123;</span></span><br><span class="line">        <span class="comment">//     return false;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(c) = <span class="keyword">self</span>.current &#123;</span><br><span class="line">            <span class="keyword">if</span> c == INIT || !s.<span class="title function_ invoke__">contains</span>(c) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="read-hexademical-read-number"><code>read_hexademical</code> &amp; <code>read_number</code></h2>
<p>è¿™æ®µæ˜¯æˆ‘é™¤äº†å»å­¦æ ¡æˆ–è€…åšä»»åŠ¡ä¹‹ç±»çš„å…¶ä»–äº‹ä»¥å¤–,åœ¨å®ç°è¿™ä¸œè¥¿çš„è¿‡ç¨‹ä¸­,åˆ°ç›®å‰ä¸ºæ­¢åœ¨è¯æ³•åˆ†æå™¨éƒ¨åˆ†èŠ±æ—¶é—´ç†è§£æœ€ä¹…çš„éƒ¨åˆ†.</p>
<p>éš¾å°±éš¾åœ¨è¿™ç©æ„æ”¯æŒå°æ•°.</p>
<p>é¦–å…ˆæ˜¯<code>read_hexademical</code>,å› ä¸ºå®ƒèµ·åˆ°çš„ä½œç”¨åœ¨åˆšå¼€å§‹è¯»çš„æ—¶å€™ä¼šå‘ç°è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸æ˜æ‰€ä»¥.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_hexadecimal</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, x: <span class="type">f64</span>) <span class="punctuation">-&gt;</span> (<span class="type">f64</span>, <span class="type">char</span>, <span class="type">isize</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> (<span class="keyword">mut</span> n, c) = (x, <span class="keyword">self</span>.current.<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">        <span class="keyword">if</span> !<span class="title function_ invoke__">is_hexadecimal</span>(c) &#123;</span><br><span class="line">            <span class="title function_ invoke__">return</span> (n, c, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cr</span> = c;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span>: <span class="type">isize</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            è¿™é‡Œmatchéƒ¨åˆ†æœ‰é—®é¢˜,</span></span><br><span class="line"><span class="comment">            åœ¨someé‡Œçš„cå¹¶ä¸æ˜¯advanceä¹‹åå®é™…çš„currentå€¼</span></span><br><span class="line"><span class="comment">            è€Œæ˜¯ä¼šè½åœ¨currentå‰ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">                <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">let</span> <span class="variable">cvalue</span> = matchhex!(c, <span class="keyword">break</span>, <span class="type">u32</span>);</span><br><span class="line">                    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">                    n = n * <span class="number">16.0</span> + (cvalue <span class="keyword">as</span> <span class="type">f64</span>);</span><br><span class="line">                    cr = c;</span><br><span class="line">                    count += <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="literal">None</span> =&gt; <span class="keyword">break</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿™é‡Œæœ€åä¸€ä¸ªå­—ç¬¦å°±åº”è¯¥è½åœ¨currentä¸Š</span></span><br><span class="line">        <span class="comment">// self.advance();</span></span><br><span class="line">        <span class="comment">// let cr = self.current.unwrap();</span></span><br><span class="line">        <span class="comment">// if self.current.is_some() &#123;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(cc) = <span class="keyword">self</span>.current &#123;</span><br><span class="line">            cr = cc;</span><br><span class="line">            <span class="comment">// dbg!(cr);</span></span><br><span class="line">        &#125;</span><br><span class="line">        (n, cr, count)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç©æ„è¿”å›ä¸‰ä¸ªå‚æ•°å«ä¹‰:åˆ†æ•°,æœ€åä¸€ä¸ªå­—ç¬¦,æŒ‡æ•°(ä¹Ÿå³æ•°å­—å­—é¢é‡é•¿åº¦)</p>
<p>å‡½æ•°é€»è¾‘å¦‚ä¸‹,ä¸»è¦è€ƒè™‘åˆ†æ•°çš„æœ€ç»ˆç»“æœ:</p>
<p>è®¾</p>
<ul>
<li>b=è¾“å…¥çš„16è¿›åˆ¶å­—ç¬¦ä¸²æ‰€å®é™…è¡¨ç¤ºçš„(10è¿›åˆ¶çš„)å€¼</li>
<li>c=å­—ç¬¦ä¸²é•¿åº¦</li>
<li>x=å‚æ•°x</li>
</ul>
<p>åˆ™å®é™…è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼(åˆ†æ•°)ä¸º x*16^c+b</p>
<blockquote>
<p>PS:è¾“å…¥å°±æ˜¯ä»<code>advance</code>è¯»çš„æ•°å­—å­—é¢é‡</p>
</blockquote>
<p>ä¹ä¸€çœ‹è‚¯å®šèƒ½ææ˜ç™½è¿™ä¸ªå‡½æ•°å¹²å•¥äº†,ä½†æ˜¯å®é™…ä¸Šæƒ³æƒ³,è¿™ä¸ªå‡½æ•°èƒ½å¹²å•¥ç”¨?</p>
<p>ä½†æ˜¯çœ‹æ˜ç™½æ¥ä¸‹æ¥<code>read_number</code>å‡½æ•°,æ‰¾åˆ°ç”¨å®ƒçš„åœ°æ–¹å°±ä¼šè±ç„¶å¼€æœ—</p>
<p>é¦–å…ˆæ¥ææ˜ç™½16è¿›åˆ¶å°æ•°è½¬10è¿›åˆ¶å°æ•°æ˜¯å’‹æçš„.</p>
<p>å‡è®¾ä¸€ä¸ª16è¿›åˆ¶å°æ•°ä¸º $\overline{abc.def}$</p>
<p>é‚£ä¹ˆå…¶å¯¹åº”çš„å°æ•°æ˜¯</p>
<p>$$<br>
a<em>16^2 + b</em>16^1 + c<em>16^0 + d</em>16^{-1} + e<em>16^{-2} + f</em>16^{-3}<br>
$$</p>
<p>æ•´æ•°éƒ¨åˆ†å¾ˆå¥½å¤„ç†,å¯ä»¥ç›´æ¥ç”¨ç°æˆçš„å‡½æ•°</p>
<p>è‡³äºå°æ•°éƒ¨åˆ†,å¦‚æœå°±è¿™ä¹ˆç®—,çœ‹ä¸Šå»è¿˜æ˜¯ä¸å¤Ÿä¼˜é›…</p>
<p>å¦‚æœå°æ•°éƒ¨åˆ†ç”¨forå¾ªç¯æŒ¨ä¸ªéå†çš„è¯,ä¼šæ¯”è¾ƒä¸‘é™‹,è¿™é‡Œç”¨pythonä¸¾ä¸ªä¾‹å­:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">int_part, frac_part = hex_str_without_prefix.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"><span class="comment"># è½¬æ¢æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">int_value = <span class="built_in">int</span>(int_part, <span class="number">16</span>)</span><br><span class="line"><span class="comment"># è½¬æ¢å°æ•°éƒ¨åˆ†ï¼ˆè¿™é‡Œç®€å•å¤„ç†ï¼Œå‡è®¾å°æ•°éƒ¨åˆ†é•¿åº¦å›ºå®šæˆ–æŒ‰ä½è½¬æ¢ï¼‰</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šè¿™é‡Œå‡è®¾å°æ•°éƒ¨åˆ†æ¯4ä½åå…­è¿›åˆ¶å¯¹åº”1ä½åè¿›åˆ¶å°æ•°ï¼ˆå³16^4=65536ï¼‰</span></span><br><span class="line"><span class="comment"># å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„å¤„ç†æ¥ç²¾ç¡®è½¬æ¢</span></span><br><span class="line">frac_value = <span class="number">0.0</span></span><br><span class="line"><span class="keyword">for</span> i, char <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">reversed</span>(frac_part)):</span><br><span class="line">    frac_value += <span class="built_in">int</span>(char, <span class="number">16</span>) * (<span class="number">16</span> ** i)</span><br><span class="line">frac_value /= (<span class="number">16</span> ** <span class="built_in">len</span>(frac_part))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†</span></span><br><span class="line">result = int_value + frac_value</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯,å¯ä»¥æœ‰ä¸€ç‚¹å·é¸¡çš„åŠæ³•</p>
<p>ä¸¾ä¸€ä¸ª10è¿›åˆ¶æ•°å­—çš„ä¾‹å­,å› ä¸ºè¿™æ ·å¥½ç±»æ¯”</p>
<p>å‡è®¾ä¸€ä¸ª10è¿›åˆ¶æ•°å­—0.123,é‚£ä¹ˆå¦‚æœç›´æ¥æŒ‰ç…§æ•´æ•°çš„æ–¹æ³•è¯»å°æ•°éƒ¨åˆ†çš„è¯é‚£å°±æ˜¯æ•´æ•°123,éœ€è¦é™¤ä»¥10^3å¾—åˆ°0.123,è¿™æ ·å°±å¯ä»¥å¾—åˆ°å®é™…è¡¨ç¤ºçš„å€¼äº†.</p>
<p>é‚£ä¹ˆç±»æ¯”åˆ°16è¿›åˆ¶ä¸Šä¹Ÿæ˜¯è¿™æ ·. å‡è®¾ä¸€ä¸ª16è¿›åˆ¶æ•°å­—0.3c,æŒ‰æ•´æ•°æ–¹æ³•è¯»åˆ°3c,10è¿›åˆ¶å€¼60,é™¤ä»¥16^2å¾—åˆ°0.234375,è¿™ä¹Ÿå°±æ˜¯16è¿›åˆ¶å°æ•°0.3cåŒ–ä¸º10è¿›åˆ¶çš„å€¼</p>
<p>åœ¨ä¸è€ƒè™‘ä»»ä½•é”™è¯¯/å¼‚å¸¸æ£€æŸ¥çš„æƒ…å†µä¸‹çš„ä¸€ä¸ªç›´æŒ‡æ€è·¯çš„pythonå‡½æ•°æ˜¯è¿™æ ·çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hs2f</span>(<span class="params">x</span>):</span><br><span class="line">    int_part, frac_part = x.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    int_value = <span class="built_in">int</span>(int_part,<span class="number">16</span>)</span><br><span class="line">    <span class="comment">#frac_value = int(frac_part,16)/(16**len(frac_part))</span></span><br><span class="line">    frac_value = <span class="built_in">int</span>(frac_part,<span class="number">16</span>)/(<span class="number">1</span>&lt;&lt;(<span class="built_in">len</span>(frac_part)*<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">return</span> int_value+frac_value</span><br></pre></td></tr></table></figure>
<p>åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè½¬æ¢ä¸ºrustä»£ç å¹¶æ·»åŠ é”™è¯¯æ£€æŸ¥å³å¯</p>
<p>è¿™æ ·çš„å¥½å¤„å°±æ˜¯å°æ•°éƒ¨åˆ†ä¹Ÿå¯ä»¥ç”¨å’Œæ•´æ•°ä¸€æ ·çš„åŠæ³•äº†</p>
<p>è¿™æ®µæ¯”è¾ƒé•¿,æˆ‘ä¼šç›´æ¥è´´å…³é”®éƒ¨åˆ†. åŒæ ·ä¹Ÿä¼šæœ‰æ³¨é‡Š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªexponentç›¸å½“äºä¸Šè¿°pythonå‡½æ•°ä¸­çš„len(frac_part)</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">exponent</span>: <span class="type">isize</span> = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">let</span> (<span class="keyword">mut</span> fraction, <span class="keyword">mut</span> latest_char, count) = <span class="keyword">self</span>.<span class="title function_ invoke__">read_hexadecimal</span>(<span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœæœ‰å°æ•°éƒ¨åˆ†(luaçš„16è¿›åˆ¶æ•°å±…ç„¶æ”¯æŒå°æ•°!)</span></span><br><span class="line"><span class="keyword">if</span> latest_char == <span class="string">&#x27;.&#x27;</span> &#123;</span><br><span class="line">    <span class="comment">//è·³è¿‡å°æ•°ç‚¹</span></span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="comment">//è¯»å°æ•°éƒ¨åˆ†,æ­¤å¤„read_hexadecimalä¸­ç¬¬ä¸€ä¸ªè¿”å›å€¼x*16^c+bçš„ä½œç”¨å°±ä½“ç°å‡ºæ¥äº†</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¿™é‡Œè¿˜æ˜¯æ‹¿10è¿›åˆ¶æ‰“ä¸ªæ¯”æ–¹</span></span><br><span class="line"><span class="comment">    æ¯”å¦‚æœ‰å°æ•°123.456</span></span><br><span class="line"><span class="comment">    æ­¤å¤„fracçš„å€¼æ˜¯123456</span></span><br><span class="line"><span class="comment">    expçš„å€¼åªä¼šæ˜¯3å°æ•°çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">    æ­¤åå°±å¯ä»¥ç›´æ¥ç”¨123456é™¤ä»¥10^3å³å¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">let</span> (frac, lchar, exp) = <span class="keyword">self</span>.<span class="title function_ invoke__">read_hexadecimal</span>(fraction);</span><br><span class="line">    fraction = frac;</span><br><span class="line">    latest_char = lchar;</span><br><span class="line">    exponent = exp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//0å®½å­—ç¬¦ä¸²éæ³•</span></span><br><span class="line"><span class="keyword">if</span> count == <span class="number">0</span> &amp;&amp; exponent == <span class="number">0</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(<span class="string">&quot;0 width number&quot;</span>.<span class="title function_ invoke__">to_string</span>()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å› ä¸ºåé¢ç”¨çš„æ˜¯exp2å‡½æ•°,å³2çš„exponentæ¬¡æ–¹</span></span><br><span class="line"><span class="comment">//åˆ16=2^4æ‰€ä»¥è¿™é‡Œä¹˜ä»¥4,</span></span><br><span class="line"><span class="comment">//åˆè¿™ä¸ªexponentæœ€åæ˜¯å½“ä½œé™¤æ•°æ‰€ä»¥æ˜¯-4</span></span><br><span class="line">exponent *= -<span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p>å…¶æ¬¡,luaçš„16è¿›åˆ¶æ•°è¿˜æ”¯æŒæŒ‡æ•°,åªä¸è¿‡æ˜¯ä»¥2ä¸ºåº•çš„.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œpç›¸å½“äºç§‘å­¦è®¡æ•°æ³•çš„e,ä½†æ˜¯ä»¥2ä¸ºåº•</span></span><br><span class="line"><span class="comment">//å³ 0xabcp2=0xabc*2^2</span></span><br><span class="line"><span class="comment">//ä¸è¿‡ä¸ºä»€ä¹ˆä¸€å¤„ç†è¿™é‡Œçš„p,æ‰€æœ‰ä¸´æ—¶ç”¨unwrapä»£æ›¿çš„ä¸œå…¨çˆ†äº†å•Š?</span></span><br><span class="line"><span class="keyword">if</span> latest_char == <span class="string">&#x27;p&#x27;</span> || latest_char == <span class="string">&#x27;P&#x27;</span> &#123;</span><br><span class="line">    <span class="comment">//è·³è¿‡p</span></span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">    <span class="comment">//æŒ‡æ•°å¯èƒ½æ˜¯è´Ÿæ•°</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">negative_exp</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//å› ä¸ºè·³è¿‡äº†pæ‰€ä»¥æ­¤å¤„æŒ‡å‘çš„æ˜¯påé¢çš„å­—ç¬¦</span></span><br><span class="line">    <span class="comment">// let c = self.current.unwrap();</span></span><br><span class="line">    <span class="keyword">match</span> <span class="keyword">self</span>.current &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(c) =&gt; &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯æ­£è´Ÿå·</span></span><br><span class="line">            <span class="keyword">if</span> c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span> &#123;</span><br><span class="line">                negative_exp = c == <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">                <span class="comment">//è·³è¿‡æ­£è´Ÿå·</span></span><br><span class="line">                <span class="keyword">self</span>.<span class="title function_ invoke__">advance</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿™é‡Œä¹Ÿåˆšå¥½è¯´æ˜äº†æŒ‡æ•°æ˜¯10è¿›åˆ¶æ•°</span></span><br><span class="line">            <span class="comment">//è¿™é‡Œæ˜¯æ˜¯10è¿›åˆ¶å°±æŠ¥é”™?è¿˜æ˜¯ä¸æ˜¯10è¿›åˆ¶æ‰æŠ¥é”™?</span></span><br><span class="line">            <span class="keyword">if</span> !<span class="title function_ invoke__">is_decimal</span>(<span class="keyword">self</span>.current.<span class="title function_ invoke__">unwrap</span>()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                    <span class="string">&quot;malformed number at p(no decimal)&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">                ));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _ =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                <span class="string">&quot;malformed number in p(eof)&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">            ))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯»æ•´æ•°(æŒ‡æ•°)</span></span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">read_digits</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">digits</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">buf_string</span>()?;</span><br><span class="line">    <span class="comment">//è¿™é‡Œæˆ‘æœ¬æ¥æƒ³å®ç°è‡ªå·±å¤„ç†æ•°å­—çš„,ä½†æ˜¯åŸç‰ˆè¿™é‡Œå°±ç›´æ¥parseäº†,æ‰€ä»¥æˆ‘å…ˆè¿™æ ·å†™ä¸€ä¸‹</span></span><br><span class="line">    <span class="comment">//ä¸è¿‡è¿™é‡Œæ—¢ç„¶å¤„ç†çš„æ˜¯10è¿›åˆ¶æ•°å­—,é‚£å°±æ²¡å¿…è¦é‚£ä¹ˆçƒ¦äº†</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">number</span> = <span class="keyword">match</span> digits.parse::&lt;<span class="type">isize</span>&gt;() &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(number) =&gt; number,</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(_) =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">                <span class="string">&quot;malformed number (invalid number for parse)&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">            ))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// exponent = if negative_exp &#123;</span></span><br><span class="line">    <span class="comment">//     exponent - number</span></span><br><span class="line">    <span class="comment">// &#125; else &#123;</span></span><br><span class="line">    <span class="comment">//     exponent + number</span></span><br><span class="line">    <span class="comment">// &#125;;</span></span><br><span class="line">    exponent += <span class="keyword">if</span> negative_exp &#123; -number &#125; <span class="keyword">else</span>&#123; number &#125;;</span><br><span class="line">    <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åè¿”å›</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(Token::<span class="title function_ invoke__">Number</span>(fraction * (exponent <span class="keyword">as</span> <span class="type">f64</span>).<span class="title function_ invoke__">exp2</span>()));</span><br></pre></td></tr></table></figure>
<p>10è¿›åˆ¶éƒ¨åˆ†å°±æ¯”è¾ƒç®€å•äº†,æ¯”è¾ƒè€ç”Ÿå¸¸è°ˆäº†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">latest_char</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">read_digits</span>();</span><br><span class="line"><span class="keyword">if</span> latest_char == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">    latest_char = <span class="keyword">self</span>.<span class="title function_ invoke__">read_digits</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> latest_char == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;e&#x27;</span>) || latest_char == <span class="title function_ invoke__">Som</span>(<span class="string">&#x27;E&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>(); <span class="comment">//parseæ”¯æŒeçš„ç§‘å­¦è®¡æ•°æ³•</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.current == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;+&#x27;</span>) || <span class="keyword">self</span>.current == <span class="title function_ invoke__">Some</span>(<span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">save_n_advance</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.<span class="title function_ invoke__">read_digits</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">buf_string</span>()?;</span><br><span class="line"><span class="comment">//ä¸ºä»€ä¹ˆ0å¼€å¤´çš„è¿˜è¦ä¿ç•™ä¸€ä¸ª0?</span></span><br><span class="line"><span class="keyword">if</span> s.<span class="title function_ invoke__">starts_with</span>(<span class="string">&quot;0&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r</span> = s.<span class="title function_ invoke__">trim_start_matches</span>(<span class="string">&quot;0&quot;</span>).<span class="title function_ invoke__">to_string</span>();</span><br><span class="line">    <span class="keyword">if</span> r.<span class="title function_ invoke__">len</span>() &lt; <span class="number">1</span> || r == <span class="string">&quot;&quot;</span> || !<span class="title function_ invoke__">is_decimal</span>(r.<span class="title function_ invoke__">as_bytes</span>()[<span class="number">0</span>] <span class="keyword">as</span> <span class="type">char</span>) &#123;</span><br><span class="line">        s = <span class="built_in">format!</span>(<span class="string">&quot;0&#123;r&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">number</span> = <span class="keyword">match</span> s.parse::&lt;<span class="type">f64</span>&gt;() &#123;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(n) =&gt; n,</span><br><span class="line">    _ =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(Errors::<span class="title function_ invoke__">LexicalError</span>(</span><br><span class="line">            <span class="string">&quot;malformed number in final parsing&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        ))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br></pre></td></tr></table></figure>
<p>æœ€åè¿”å›</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">Ok</span>(Token::<span class="title function_ invoke__">Number</span>(number))</span><br></pre></td></tr></table></figure>
<p>æˆ‘çŸ¥é“æˆ‘æ¯”è¾ƒç¬¨,è¿™ä¸œè¥¿è¿˜è¦çœ‹è¿™ä¹ˆä¹…æ‰èƒ½çœ‹æ‡‚. ä½†æ˜¯æ¯•ç«Ÿç¬¬ä¸€æ¬¡åšè¿™ä¸œè¥¿,å¹¶ä¸”è¿™ç§16è¿›åˆ¶å°æ•°çš„ä¸œè¥¿,æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡åŠ¨æ‰‹å®ç°,ä¹‹å‰éƒ½æ˜¯æœ‰ç°æˆå·¥å…·,æˆ–è€…æˆ‘å¯ä»¥è¿™ä¹ˆè¯´:16è¿›åˆ¶å°æ•°ç¡®å®ç‰¹åˆ«ç‰¹åˆ«å°‘è§. ä½†æ˜¯è¿™ä¹ˆè¯´äº†åˆæœ‰ä»€ä¹ˆåŠæ³•å‘¢? æ¯•ç«Ÿluaæ ‡å‡†é‡Œæ”¯æŒè¿™ç©æ„,è¯¥å®ç°è¿˜å¾—å®ç°.</p>
<h2 id="reserved-or-name"><code>reserved_or_name</code></h2>
<p>è¿™éƒ¨åˆ†ç®€ç›´å°±æ˜¯ç®€å•åˆè½»æ¾,ä¸€ç›®äº†ç„¶çš„ä¸œè¥¿,ä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„,ç›´æ¥ä¸Š:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">reserved_or_name</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> ResultE&lt;Token&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">s</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">buf_string</span>()?;</span><br><span class="line">        <span class="built_in">debug_assert!</span>(s.<span class="title function_ invoke__">len</span>() &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">t</span> = <span class="keyword">match</span> s.<span class="title function_ invoke__">as_str</span>() &#123;</span><br><span class="line">            <span class="string">&quot;and&quot;</span> =&gt; Token::And,</span><br><span class="line">            <span class="string">&quot;break&quot;</span> =&gt; Token::Break,</span><br><span class="line">            <span class="string">&quot;do&quot;</span> =&gt; Token::Do,</span><br><span class="line">            <span class="string">&quot;else&quot;</span> =&gt; Token::Else,</span><br><span class="line">            <span class="string">&quot;elseif&quot;</span> =&gt; Token::Elseif,</span><br><span class="line">            <span class="string">&quot;end&quot;</span> =&gt; Token::End,</span><br><span class="line">            <span class="string">&quot;false&quot;</span> =&gt; Token::False,</span><br><span class="line">            <span class="string">&quot;for&quot;</span> =&gt; Token::For,</span><br><span class="line">            <span class="string">&quot;function&quot;</span> =&gt; Token::Function,</span><br><span class="line">            <span class="string">&quot;if&quot;</span> =&gt; Token::If,</span><br><span class="line">            <span class="string">&quot;in&quot;</span> =&gt; Token::In,</span><br><span class="line">            <span class="string">&quot;local&quot;</span> =&gt; Token::Local,</span><br><span class="line">            <span class="string">&quot;nil&quot;</span> =&gt; Token::Nil,</span><br><span class="line">            <span class="string">&quot;not&quot;</span> =&gt; Token::Not,</span><br><span class="line">            <span class="string">&quot;or&quot;</span> =&gt; Token::Or,</span><br><span class="line">            <span class="string">&quot;repeat&quot;</span> =&gt; Token::Repeat,</span><br><span class="line">            <span class="string">&quot;return&quot;</span> =&gt; Token::Return,</span><br><span class="line">            <span class="string">&quot;then&quot;</span> =&gt; Token::Then,</span><br><span class="line">            <span class="string">&quot;true&quot;</span> =&gt; Token::True,</span><br><span class="line">            <span class="string">&quot;until&quot;</span> =&gt; Token::Until,</span><br><span class="line">            <span class="string">&quot;while&quot;</span> =&gt; Token::While,</span><br><span class="line">            _ =&gt; Token::<span class="title function_ invoke__">Name</span>(s),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">self</span>.buffer.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(t)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Post-Script">Post Script</h2>
<p>å®ç°ä¸€ä¸ªè¿™ç©æ„ç¡®å®ä¸ç®€å•å•Š. è¿™è¿˜åªæ˜¯èƒ½è®¤å‡ºæºä»£ç çš„çº§åˆ«,å‰©ä¸‹çš„è¿˜æœ‰æ„å»ºè¯­æ³•æ ‘,è™šæ‹Ÿæœºä¹‹ç±»çš„ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿,æˆ‘è¿˜çœ‹éƒ½æ²¡çœ‹. æˆ‘å¾—èµ¶å¿«çœ‹æ˜ç™½è¿™ä¸œè¥¿å¹¶ä¸”æ•´å‡ºæ¥,æ—¶é—´ä¸å¤šäº†</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://mnizjc.qzz.io">Mnizjc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://mnizjc.qzz.io/2024/09/23/rust%E5%AE%9E%E7%8E%B0lua%E8%A7%A3%E9%87%8A%E5%99%A8%E4%B9%8B%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/">https://mnizjc.qzz.io/2024/09/23/rust%E5%AE%9E%E7%8E%B0lua%E8%A7%A3%E9%87%8A%E5%99%A8%E4%B9%8B%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://mnizjc.qzz.io" target="_blank">OMG!IT'S 11!!</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/learn/">learn</a><a class="post-meta__tags" href="/tags/rust/">rust</a></div><div class="post-share"><div class="social-share" data-image="https://free.picui.cn/free/2026/02/01/697e3db74f259.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/paybywechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/paybywechat.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/paybyalipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/paybyalipay.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/09/25/%E7%9A%BF%E7%85%AE/" title="çš¿ç…®"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3db28558d.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">çš¿ç…®</div></div><div class="info-2"><div class="info-item-1">å…¨æ–‡æ‰¯æ·¡ è¯·å®Œå…¨å¿½è§†æˆ‘ å¦‚æœç›´æ¥ä¸Šè¯‰çš„é€šé“éƒ½ä¸å­˜åœ¨ï¼Œæˆ–è€…æƒ³è¦ä¸Šè¯‰å´è¦è€ƒè™‘è¿™äº›ä¸œè¥¿åˆ°åº•ã€Œåˆä¸åˆé€‚ã€ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„çš¿ç…®é›†ä¸­åˆ¶ï¼Œæˆ‘è§‰å¾—ä¸å¦‚ä¸ç›´æ¥åˆšæ¥å°±è¯´ã€Œæˆ‘æ˜¯ç‹¬è£çš„ã€æ›´è®©äººæ„Ÿè§‰èˆ’æœï¼Œå› ä¸ºç»åˆ‘æ€»æ˜¯æ¯”å‡Œè¿Ÿæ¥çš„æ›´ç—›å¿«ã€‚ å¦‚æœåé¦ˆçš„æµç¨‹è¿‡äºå½¢å¼è€Œå†—é•¿ï¼Œä¸”å……æ»¡å¯æ“ä½œçš„ç©ºé—´ï¼Œé‚£ä¹ˆè¿™ç§åé¦ˆé€šé“å­˜åœ¨çš„æ„ä¹‰åˆæ˜¯ä»€ä¹ˆï¼Ÿä¸ºäº†åº”ä»˜æ£€æŸ¥ï¼Ÿä¸ºäº†å‡¸æ˜¾æˆ‘çš„ã€Œçš¿ç…®ã€ï¼Ÿè¿˜æ˜¯å•çº¯ä¸ºäº†æ»¡è¶³æˆ‘çš„è™šè£å¿ƒï¼Ÿ å¦‚æœåé¦ˆä¸€ä¸ªé—®é¢˜çš„å­˜åœ¨ï¼Œå´è¦è¢«å‘ä¸‹åé—®è¯´éš¾é“è¿™ä¸ªé—®é¢˜åœ¨ä½ ä»¬ä¹‹é—´ä¸ä¹Ÿå­˜åœ¨å—ï¼Ÿå¦‚æœä¸Šé¢è¿è¿™ç§æœ¬åº”è¯¥æ˜¯ä»–ä»¬å¼•ä»¥ä¸ºå‚²çš„ã€Œè¡¨ç‡ã€ä½œç”¨éƒ½ä¸åœ¨å­˜åœ¨äº†ï¼Œé‚£ä¹ˆè¿™ç§å­˜åœ¨ï¼Œé™¤äº†è®©åº•å±‚ç§¯æ€¨ï¼Œæˆ‘æƒ³è¿˜æœ‰å¯èƒ½å°±æ˜¯çˆ†å‘å§ã€‚ å¦‚æœä¸€ä¸ªåä¹‰ä¸Šçš¿ç…®çš„æŠ•ç¥¨ï¼ŒèƒŒåœ°é‡Œä¸çŸ¥é“æœ‰å¤šå°‘æ— å½¢çš„æ‰‹åœ¨æ§åˆ¶è¿™ä¸€åˆ‡ï¼Œé‚£ä¹ˆè¿™ç§æŠ•ç¥¨å­˜åœ¨çš„æ„ä¹‰åˆæ˜¯ä»€ä¹ˆï¼Ÿä¸ºäº†ä½“ç°ã€Œæˆ‘å¾ˆå…³å¿ƒä½ ä»¬çš„æƒ³æ³•ã€ï¼Ÿè¿˜æ˜¯ä¸ºäº†ä»ä¸­æ”«å–æ›´å¤šçš„åˆ©ç›Šï¼Ÿ å¦‚æœè·å¾—ä¸€ç§èº«ä»½ï¼Œåªæ˜¯ä¸ºäº†æå‡åœ°ä½ï¼Œè·å¾—åˆ©ç›Šï¼Œåœ¨å¾—åˆ°äº†æƒåˆ©çš„åŒæ—¶å¿˜è®°äº†ä¹‰åŠ¡ï¼Œå¿˜è®°äº†è¿™ç§èº«ä»½æœ€æœ¬çœŸï¼Œæœ€æ ¸å¿ƒçš„ç†æƒ³å’Œç²¾ç¥ï¼Œäº¦æˆ–æ˜¯å®ƒåªå­˜åœ¨äºå£å·ä¸­ï¼Œé‚£ä¹ˆæ‹¥æœ‰è¿™ç§èº«ä»½çš„äººå­˜åœ¨ï¼Œæ˜¯å¦çœŸçš„èƒ½åšåˆ°ã€Œä¸ºäººæ°‘æœåŠ¡ã€ï¼Ÿè¿˜æ˜¯ä»–ä»¬ä¸è¿‡æ˜¯æ–°ä¸€ä»£çš„ã€Œå¥´éš¶ä¸»ã€ï¼Ÿ </div></div></div></a><a class="pagination-related" href="/2024/05/30/%E4%BA%8C%E9%87%8D%E4%B8%8D%E5%AE%9A%E7%A7%AF%E5%88%86(%E4%B9%9F%E4%B8%8D%E4%B8%80%E5%AE%9A%E5%85%A8)/" title="äºŒé‡ä¸å®šç§¯åˆ†(ä¹Ÿä¸ä¸€å®šå…¨)"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3dafee34c.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">äºŒé‡ä¸å®šç§¯åˆ†(ä¹Ÿä¸ä¸€å®šå…¨)</div></div><div class="info-2"><div class="info-item-1"> æœ¬æ–‡è½¬è‡ª[https://math.stackexchange.com/questions/704186/indefinite-double-integral], æœ‰æ‰€å¯å‘  èµ·å›  ç°åœ¨æˆ‘æŸ¥åˆ°å’Œè§è¿‡ç”¨è¿‡çš„è®¡ç®—å™¨ä¸­,åªæœ‰walframalphaèƒ½è§£äºŒé‡ä¸å®šç§¯åˆ†,è€Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®²è¿‡äºŒé‡ç§¯åˆ†è¿˜æœ‰ä¸å®šçš„,ç”šè‡³å½“æ—¶è€å¸ˆå°±ç›´æ¥è¯´äº†: äºŒé‡ç§¯åˆ†åŠä»¥ä¸Šçš„ç®—å‡ºæ¥çš„éƒ½æ˜¯ä¸ªæ•°,æ²¡æœ‰ä¸å®šç§¯åˆ†.è¯´å®è¯,æˆ‘å½“æ—¶æ¥è§¦è¿™ç©æ„çš„æ—¶å€™,æˆ‘ä¹Ÿè§‰å¾—è¿™ç©æ„æ²¡å‘ä¸å®šç§¯åˆ†,æ¯•ç«Ÿå­¦åˆ°è®¡ç®—çš„æ—¶å€™äºŒé‡ç§¯åˆ†çš„åŒºåŸŸåœ¨è®¡ç®—ä¸­å æ®äº†ä¸å¯æˆ–ç¼ºçš„åœ°ä½,æˆ‘å°±è§‰å¾—è¿™ä¸å°±ç›¸å½“äºç›´æ¥å¯¹äºŒé‡ä¸å®šç§¯åˆ†åˆ¤æ­»åˆ‘äº†å—.åé¢çœ‹åˆ°walframalphaèƒ½è®¡ç®—äºŒé‡ä¸å®šç§¯åˆ†,å¹¶ä¸”è¿˜å¾ˆæ˜ç¡®çš„å†™äº†ä¸ªã€Œindefinite integralã€,æˆ‘å°±å¼€å§‹å¥½å¥‡å®ƒæ˜¯æ€ä¹ˆè®¡ç®—äºŒé‡è¿˜ä¸å®šçš„ç§¯åˆ†çš„äº†.  é—®é¢˜ åœ¨å¾®ç§¯åˆ†ä¸­æˆ‘ä»¬å…ˆä»‹ç»äº†ä¸å®šç§¯åˆ†,ç„¶åå†ä»‹ç»çš„å®šç§¯åˆ†. ç„¶åæˆ‘ä»¬ä»‹ç»äº†äºŒé‡(å®š)ç§¯åˆ†å’Œå¤šé‡(å®š)ç§¯åˆ†çš„æ¦‚å¿µ.æ˜¯å¦æœ‰äºŒé‡(æˆ–å¤šé‡)ä¸å®šç§¯åˆ†çš„æ¦‚å¿µ?è‹¥æ˜¯,è¿™ç©æ„æ€ä¹ˆå®šä¹‰çš„?ä¸ºå•¥ä¸å­¦?è‹¥å¦,ä¸ºå•¥? å›ç­” #1 ç­”æ¡ˆæ˜¯è‚¯å®šçš„.è‹¥å‡è®¾åæ–‡ä¸­çš„å‡½æ•°éƒ½æ˜¯ã€Œå…‰æ»‘ã€çš„,åˆ™æœ‰   ç¢ç¢å¿µ: ä¸ºä»€ä¹ˆè¿™...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2023/02/05/%E6%B5%85%E8%B0%88%E4%BF%A1%E6%81%AF%E7%86%B5/" title="æµ…è°ˆä¿¡æ¯ç†µ"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3dafe60d3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-05</div><div class="info-item-2">æµ…è°ˆä¿¡æ¯ç†µ</div></div><div class="info-2"><div class="info-item-1">å¦‚æœä½ åªèƒ½é€šè¿‡ä¸€ä¸ªç¡¬å¸æ¥è¡¨ç¤ºæˆ–è€…ä¼ é€’ä¿¡æ¯,ä½ ä¼šæ€ä¹ˆåš?å¦‚æœæ˜¯ä¸€ä¸ªéª°å­å‘¢? æˆ‘ä»¬å…ˆä»ä¸€ä¸ªæœ€ç®€å•çš„,ã€Œé‡å­åŒ–ã€åšçš„æ¯”è¾ƒå¥½çš„ä¸€ä¸ªæ¨¡å‹â€“ç¡¬å¸æ¥è¯´ ç°åœ¨ä½ é¢å‰æœ‰ä¸€ä¸ªç›’å­,é‡Œé¢æœ‰ä¸€é»‘ä¸€ç™½ä¸¤ä¸ªçƒ,ä½ ä»ä¸­éšæœºæ‘¸åˆ°ä¸€ä¸ªçƒå¹¶ä¸”ç”¨è¿™ä¸ªç¡¬å¸å‘Šè¯‰åˆ«äººä½ æŠ½åˆ°äº†ä»€ä¹ˆçƒ,ä½ åº”è¯¥æ€ä¹ˆåš? æˆ–è€…,æœ‰äººé—®äº†ä½ ä¸€ä¸ªã€Œyes or noã€é—®é¢˜,ä½ ä¹Ÿåªèƒ½ç”¨ç¡¬å¸æ¥ä¼ é€’ä¿¡æ¯,ä½ è¯¥æ€ä¹ˆåš? è¿™ä¸ªé—®é¢˜çœ‹èµ·æ¥ç¡®å®æŒºç®€å•çš„,åªè¦ç®€å•è§„å®šä¸€ä¸‹ç¡¬å¸çš„æ­£åé¢åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå†…å®¹å°±å¯ä»¥ç”¨ç¡¬å¸æ¥ä¼ é€’ä¿¡æ¯äº† å¦‚æœè¿™ä¸ªç›’å­é‡Œæœ‰ä¸‰ç§é¢œè‰²çš„çƒå‘¢?å®é™…ä¸Šä¹Ÿå¥½è¯´,ä¸¤ä¸ªç¡¬å¸å››ç§æƒ…å†µå®Œå…¨å¯ä»¥åŒ…å«æ‰€æœ‰æƒ…å†µäº† å¦‚æœè¿™ä¸ªç›’å­é‡Œæœ‰4ç§,5ç§,ç”šè‡³äºæ›´å¤šé¢œè‰²çš„çƒå‘¢? ç°åœ¨è¿™ä¸ªé—®é¢˜å°±å˜æˆäº†:ç›’å­é‡Œæœ‰nä¸­é¢œè‰²çš„çƒ,ä½ ç”¨å¤šå°‘ä¸ªç¡¬å¸å¯ä»¥å¤„ç†æ‰€æœ‰çš„æƒ…å†µ? ä½ å®Œå…¨å¯ä»¥æƒ³åˆ° å¦‚æœæ‰‹ä¸Šæœ‰ä¸ªç¡¬å¸é‚£å®ƒä»¬æ‰€èƒ½ä»£è¡¨çš„æƒ…å†µæœ‰ä¸ª é‚£æˆ‘ä»¬å°±å¯ä»¥åè¿‡æ¥ç”±æƒ…å†µæ•°æ±‚ç¡¬å¸æ•° å¦‚æœæœ‰ä¸­æƒ…å†µå°±éœ€è¦æœ‰ä¸ªç¡¬å¸ä½†å› å®é™…å·¥ç¨‹ä¸Šæ— æ³•å®ç°æ‰€ä»¥å®é™…ä¸Šéœ€è¦ä¸ªç¡¬å¸ å·¥ç¨‹ä¸Šæ— æ³•å®ç°å¹¶ä¸é˜»ç¢æˆ‘ä»¬å¯¹äºæœ¬è´¨çš„ç†è§£ ä½†æ˜¯ä¸Šé¢çš„æƒ…å†µéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹:æ¯ä»¶äº‹å‘ç”Ÿæ¦‚ç‡ç›¸ç­‰(å¤å…¸æ¦‚å‹) ç°åœ¨å›åˆ°ç›’å­çš„ä¾‹å­ä¸­,å¦‚æœè¿™ä¸ªç›’å­é‡Œè¿˜æ˜¯åªæœ‰ä¸¤ç§é¢œè‰²çš„çƒ,ä½†æ˜¯æ•°é‡ä¸...</div></div></div></a><a class="pagination-related" href="/2022/10/12/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95/" title="hexoåšå®¢æ­å»ºè¸©å‘å®å½•"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3db87b647.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-12</div><div class="info-item-2">hexoåšå®¢æ­å»ºè¸©å‘å®å½•</div></div><div class="info-2"><div class="info-item-1">è¯´å®è¯ä¸è¸©å‘æ˜¯çœŸå­¦ä¹ ä¸åˆ°ä¸œè¥¿çš„,æ•™è®­æ€»æ¯”ç»éªŒè®©äººè®°å¿†æ·±åˆ» æœ¬æ¥å°±æƒ³ç€å¦‚æœè‡ªå·±æ³¨å†Œä¸ªåŸŸå,æ­ä¸ªæœåŠ¡å™¨è·‘è¿™è·‘é‚£çš„æŒºéº»çƒ¦,æ‰€ä»¥æˆ‘å°±é€‰æ‹©äº†æŠŠè¿™ç©æ„éƒ¨ç½²åˆ°githubä¸Š(çº¯æ‡’,çº¯æƒ³ç™½å«–,æƒ³å¯„ç”Ÿ),ä½†æ˜¯åƒgithub pages,gitè¿™äº›ä¸œè¥¿æˆ‘è¿˜çœŸæ˜¯ç¬¬ä¸€æ¬¡ç”¨,çº¯å°ç™½ä¸€ä¸ª,æ‰è¸©äº†è¿™äº›ä¸ªå‘ åŸæœ¬å°±ä¸éœ€è¦èŠ±å¤šå°‘åŠŸå¤«,ä½†æ˜¯æˆ‘è¿˜æ˜¯å› ä¸ºä¸€äº›ç ´äº‹å¿™äº†ä¸€å¤© å®é™…ä¸Šè¿™äº›é”™è¯¯éƒ½æ˜¯æˆ‘çŠ¯ç³Šæ¶‚æ‰€å¯¼è‡´çš„ å…ˆæ˜¯ä¸€ä¸ªå°é—®é¢˜:hexoä¸Šçš„markdownè¯­æ³•è§„åˆ™/hexoæ ‡é¢˜ è¿™ä¸€æ­¥æˆ‘è¿˜æ²¡éƒ¨ç½²åˆ°githubä¸Š,è¿˜æ˜¯åœ¨æœ¬åœ° æˆ‘ç›´æ¥æˆ‘ç›´æ¥ æˆ‘ç›´æ¥æ²¡æœ‰ç›´æ¥å˜› ä¸å»æ‰“å¼€é‚£ä¸ªhello-worldçœ‹çœ‹è¿˜çœŸä¸çŸ¥é“ hexoæ¯æ¬¡æ–°å»ºä¸€ä¸ªpostéƒ½ä¼šåœ¨å¼€å¤´åŠ è¿™ä¹ˆä¸ªä¸œè¥¿: 12345---title: äº²çˆ±çš„æ ‡é¢˜date: 2022-10-12 18:24:05tags: (any tags you want)--- å¦‚æœæˆ‘å†å¤šåŠ ä¸€ä¸ªä¸€çº§æ ‡é¢˜å¹¶ä¸”å’Œè¿™é‡Œçš„titleå†…å®¹ä¸ä¸€æ ·,é‚£ç»“æœå°±æ˜¯ ä½ å¯èƒ½èŠ±äº†é‚£ä¹ˆä¹…å†™çš„ä¸€ç¯‡æ–‡ç« ,åˆ°æ—¶å€™åå°ç®€å•æŠ¥ä¸ªé”™,å‰ç«¯ç›´æ¥å½“ä½ å•¥éƒ½æ²¡å¹²è¿‡ä¸€æ · è¯´å®è¯è¿™ä¸œè¥¿æŒºè®©äººæ— è¯­çš„ ä¸è¿‡æ—¢ç„¶ä¸€çº§æ ‡é¢˜titleå·²ç»è§£å†³äº†,é‚£äºŒçº§æ ‡é¢˜å¼€...</div></div></div></a><a class="pagination-related" href="/2023/12/10/Mathjax%E6%8F%92%E5%85%A5%E9%97%AD%E5%90%88%E6%9B%B2%E9%9D%A2%E7%A7%AF%E5%88%86%E7%AC%A6%E5%8F%B7/" title="Mathjaxæ’å…¥é—­åˆæ›²é¢ç§¯åˆ†ç¬¦å·"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3dc04e47f.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-10</div><div class="info-item-2">Mathjaxæ’å…¥é—­åˆæ›²é¢ç§¯åˆ†ç¬¦å·</div></div><div class="info-2"><div class="info-item-1">æˆ‘çœŸæƒ³ä¸æ˜ç™½ä¸ºä»€ä¹ˆMathjaxä¸ºä»€ä¹ˆä¸æ”¯æŒ\oiintè¿™ä¸ªç¬¦å· ç›´åˆ°æˆ‘å‘ç°çŸ¥ä¹ç”¨çš„å¥½åƒä¹Ÿæ˜¯mathjax, æˆ‘å°±æ”¾å¿ƒå¤ªå¤šäº†, å› ä¸ºæˆ‘ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªå› ä¸ºè¿™ç ´äº‹çƒ¦çš„äºº. æˆ‘çœ‹åˆ°çŸ¥ä¹ä¸Šæœ‰äººå†™è¿‡æ€ä¹ˆåœ¨å…¶ä¸­æ’å…¥ç¬¦å·, è§£å†³æ–¹æ³•æ˜¯æ‹¼æ¥å­—ç¬¦, åˆšå¥½å¯ä»¥å­¦ä¸€ä¸‹æ€ä¹ˆæäº† æœ€å¼€å§‹æˆ‘çŸ¥é“\displaystyleè€Œä¸çŸ¥é“\mathopçš„æ—¶å€™æˆ‘çš„è§£å†³æ–¹æ¡ˆ 1\displaystyle{\iint\kern{-26.5mu}\lower{4mu}\LARGE{\unicode{0x2B2D}}\kern{-13mu}\lower{14mu}\scriptsize{\partial V}\ \ \ \ \ } â¬­ çŸ¥é“\mathopå 1\displaystyle{\mathop{\displaystyle{\iint\kern{-26.5mu}\lower{4mu}\LARGE{\unicode{0x2B2D}}}}\limits_{\partial V}\ \ } â¬­ è¯•è¯•è‡ªå®šä¹‰å‘½ä»¤ â¬­ 12345678910111213141516\newcommand{\newcmddef}{\text{This ...</div></div></div></a><a class="pagination-related" href="/2022/10/19/%E5%81%8F%E6%89%A7%E7%9A%84%E6%84%8F%E4%B9%89/" title="åæ‰§çš„æ„ä¹‰"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3dafa11bc.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-19</div><div class="info-item-2">åæ‰§çš„æ„ä¹‰</div></div><div class="info-2"><div class="info-item-1">ä»Šå¤©çœ‹å®Œã€Šè¾©è®ºå²ä¸Šæœ€ç»å…¸çš„æˆ˜å½¹â€”â€”2001å›½é™…å¤§ä¸“è¾©è®ºèµ›å†³èµ› é’±æ˜¯/ä¸æ˜¯ä¸‡æ¶ä¹‹æºã€‹è¿™åœºè¾©è®ºèµ›,åŒæ–¹çš„è®ºè¯éƒ½å¾ˆç²¾å½©.å…¶ä¸­åæ–¹å››è¾©å‘¨ç„æ¯…ã€Šåæ‰§çš„æ„ä¹‰ã€‹ä¸€æ–‡,æˆ‘è§‰å¾—å†…å®¹å¾ˆæ·±åˆ»,äºæ˜¯å†³å®šæŠŠå®ƒè½¬è½½è¿‡æ¥. ä»¥ä¸‹æ˜¯æ­£æ–‡,æ‘˜è‡ªå‘¨ç„æ¯…ã€Šåæ‰§çš„æ„ä¹‰ã€‹ï¼šåŒæ–¹å„æ‰§çœŸç†çš„ä¸¤é¢_è¾©è®º (sohu.com)  ä»¤äººäº˜å¤çº ç»“çš„è¾©é¢˜ï¼Œå¤§å¤šæ˜¯ä¸€ä¸ªçœŸç†å‰–æˆä¸¤åŠçš„ç»“æœã€‚ æ¯”å¦‚è¯´ï¼Œäººæ€§æœ¬å°±å–„æ¶æ‚ç³…ï¼Œæ‰€ä»¥â€œäººæ€§æœ¬å–„â€è¿˜æ˜¯â€œäººæ€§æœ¬æ¶â€å°±å¾ˆéš¾è¾©å¾—æ¸…æ¥šï¼›åˆæ¯”å¦‚ï¼ŒçŸ¥è¯†ä¸å®è·µæœ¬æ˜¯ä¸€ä½“ä¸¤é¢ï¼Œæ‰€ä»¥â€œçŸ¥éš¾è¡Œæ˜“â€å’Œâ€œçŸ¥æ˜“è¡Œéš¾â€ä¹Ÿå°±åªèƒ½å„æ‰§ä¸€è¯ã€‚ æˆ‘åˆšå¼€å§‹å­¦è¾©è®ºçš„æ—¶å€™ï¼Œæœ€å›°æƒ‘çš„å°±æ˜¯è¿™ä¸ªé—®é¢˜â€”â€”è¯´å¥½çš„è¾©è¯æ³•å‘¢ï¼Ÿè¯´å¥½çš„ä¸åæ‰§å‘¢ï¼Ÿè¯´å¥½çš„æ±‚çœŸå‘å–„å‘¢ï¼Ÿ å¦‚æœè¾©è®ºå°±æ˜¯æœ‰æ„æŠŠçœŸç†åˆ‡æˆä¸¤ä¸ªè°¬è¯¯ï¼Œè®©åŒæ–¹åµå¾—ä¸å¯å¼€äº¤ä»¥åšäººä¸€ç¬‘ï¼Œå®ƒå’Œæ–—è›è›æœ‰ä»€ä¹ˆåˆ†åˆ«ï¼Ÿæ­£å¥½å½“æ—¶çœ‹åˆ°ä¸€ä¸ªæ®µå­ï¼Œè¯´å¤§å¤šæ•°è¾©é¢˜ï¼Œå…¶å®éƒ½æ˜¯ç±»ä¼¼äºâ€œæ–‘é©¬æ˜¯é»‘è¿˜æ˜¯ç™½â€è¿™æ ·çš„æ— èŠé—²æ‰¯ï¼Œå“‘ç„¶å¤±ç¬‘ä¹‹åï¼Œæ‹³æ‹³æœè†ºæ·±ä»¥ä¸ºç„¶ã€‚ ä¸è¿‡ï¼Œåæ¥çœ‹åˆ°ä¸€ç¯‡ç§‘æ™®æ–‡ç« ï¼Œè¯´â€œæ–‘é©¬æ˜¯é»‘åº•ç™½æ¡çº¹ï¼Œè¿˜æ˜¯ç™½åº•é»‘æ¡çº¹â€å…¶å®å¹¶ä¸æ˜¯ä¸ªæ— èŠçš„é—®é¢˜ï¼Œä»èƒšèƒå‘è‚²çš„è¯æ®å’Œè¿›åŒ–è®ºçš„æ¨ç†æ¥è¯´ï¼Œæ–‘é©¬åŸæœ¬éƒ½åº”è¯¥æ˜¯ä¸€ç§é»‘è‰²çš„åŠ¨ç‰©ï¼Œç™½æ¡çº¹æ˜¯åæ¥æ‰åœ¨é»‘åº•ä¸Šé•¿å‡ºæ¥çš„ã€‚ è¿™ä¸ªç»“è®º...</div></div></div></a><a class="pagination-related" href="/2024/03/01/mingw-vcpkg-cmake-vscode-c-c-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="mingw+vcpkg+cmake+vscode c&#x2F;c++ç¯å¢ƒé…ç½®"><img class="cover" src="https://free.picui.cn/free/2026/01/31/697cf4d82309f.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-01</div><div class="info-item-2">mingw+vcpkg+cmake+vscode c&#x2F;c++ç¯å¢ƒé…ç½®</div></div><div class="info-2"><div class="info-item-1">è‹å¤©ä¿ä½‘, è¿™ä¸ªè¿‡ç¨‹æ€»ç®—æ˜¯åœ†æ»¡ç»“æŸäº† ä»æˆ‘ä¸¤å¤©å‰å†’å‡ºä¸€ä¸ªç”¨c/c++åšç½‘ç»œè¯·æ±‚çš„æƒ³æ³•(å› ä¸ºå¯èƒ½ç”¨å¾—åˆ°), åˆ°ä»Šå¤©æ•´ä¸ªç¯å¢ƒé…ç½®å®Œæ¯•, èŠ±äº†æˆ‘ä¸¤ä¸‰å¤©çš„æ—¶é—´. ä¸­é—´æ–­æ–­ç»­ç»­æœ‰è¶…çº§å¤šçš„åŠ¨ä½œ, è¿™é‡Œæˆ‘å°½å¯èƒ½è¯¦ç»†çš„æŠŠå®ƒè®°å½•ä¸‹æ¥. æ¸…å• å¦‚æ ‡é¢˜æ‰€ç¤º, æˆ‘ä»¬è¿™æ¬¡ä¸»è¦éœ€è¦å››æ ·ä¸œè¥¿:  (MinGW)[https://github.com/niXman/mingw-builds-binaries/releases] (è¯´èµ·æ¥æˆ‘å¥½åƒæœ‰æ®µæ—¶é—´æ²¡æ›´æ–°äº†) (vcpkg)[https://github.com/Microsoft/vcpkg] (CMake)[https://cmake.org/] (vscode)[https://code.visualstudio.com/]  å…¶ä¸­mingwå’Œvcpkgå¯ä»¥ç”¨git cloneä¸‹è½½ å®‰è£… æœ€ç®€å•å°±æ˜¯å®‰è£…cmake, è¿™ç©æ„æœ‰å®‰è£…å‘å¯¼, è·Ÿç€å‘å¯¼èµ°å°±å®Œäº†, æœ€ååœ¨æµ‹è¯•ä¸€ä¸‹cmakeå‘½ä»¤æ˜¯å¦å­˜åœ¨, æœ‰åˆ™å®‰è£…æˆåŠŸ ç„¶åå°±æ˜¯mingw, æˆ‘çš„å®‰è£…è¿‡ç¨‹å¾ˆç®€å• ä¸‹è½½release -&gt; æŠŠå‹ç¼©åŒ…è§£å‹åˆ°ä»€ä¹ˆåœ°æ–¹ -&gt; æŠŠè§£å‹æ–‡ä»¶å¤¹ä¸­çš„binæ–‡ä»¶å¤¹åŠ å…¥pat...</div></div></div></a><a class="pagination-related" href="/2026/01/31/%E8%AE%AE%E8%AE%BA%E8%B0%AC%E8%AF%AF/" title="è®®è®ºè°¬è¯¯"><img class="cover" src="https://free.picui.cn/free/2026/02/01/697e3db5ca4c3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-31</div><div class="info-item-2">è®®è®ºè°¬è¯¯</div></div><div class="info-2"><div class="info-item-1">è™½ç„¶æ˜¯èƒ¡æ€ä¹±æƒ³ï¼Œä½†æ˜¯æˆ‘å€’å¾ˆéš¾è¯´æˆ‘å¯¹è¿™äº›å†…å®¹çš„æƒ³æ³•æœ‰ä»€ä¹ˆè´¡çŒ®ï¼Œæ‰€ä»¥tagä¸ºlearnå¥½äº†ã€‚ åˆ·åˆ°äº†ä¸€ä¸ªå…³äºè®®è®ºè°¬è¯¯çš„è§†é¢‘ï¼Œçœ‹çš„æ—¶å€™ç†è§£äº†ä¸€ç‚¹ç‚¹ã€‚ä¼ é€é—¨ï¼šBV17hgJzFEKG è®®è®ºè°¬è¯¯ï¼ˆlogical fallacyï¼‰æ˜¯æŒ‡åœ¨è®ºè¯è¿‡ç¨‹ä¸­å‡ºç°çš„é€»è¾‘é”™è¯¯ï¼Œå¯¼è‡´ç»“è®ºä¸æˆç«‹æˆ–ä¸å¯é ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è®®è®ºè°¬è¯¯ç±»å‹ï¼Œä»¥åŠæˆ‘çš„ä¸€ç‚¹ç‚¹ç†è§£ã€‚   äººèº«æ”»å‡»ï¼šå¯¹äººä¸å¯¹äº‹   è‰ç‡æ¦‚æ‹¬ï¼šç‰‡é¢æ ¹æ®æŸäº›ç°è±¡æ¨è®ºæ•´ä½“  åˆåä»¥åæ¦‚å…¨    çº¢é²±é±¼ï¼šè½¬ç§»æ³¨æ„åŠ›ä»¥é€ƒé¿è¯é¢˜  â€“æ¶¨å·¥èµ„äº†å—ï¼Ÿ --è¿˜åœ¨è€ƒè™‘ï¼Œä½†æ˜¯ä¼šç»™å‘˜å·¥æä¾›å…¶ä»–ç¦åˆ©ã€‚ã€‚ã€‚    è¯‰è¯¸è™šä¼ªï¼šä¸å›åº”å¯¹æ–¹æ‰¹è¯„åè€ŒæŒ‡è´£å¯¹æ–¹ä¹‹å‰ä¹Ÿè¿™æ ·ä»¥è´¨ç–‘è®ºç‚¹  â€“ä½ è¯¥å¥èº«äº† --ä½ ä¹‹å‰ä¹Ÿæ²¡å¥èº«å•Š æœ‰ç‚¹ä¸å®äº‹æ±‚æ˜¯çš„æ„å‘³    æ»‘å¡ï¼šè¿‡åˆ†å¤¸å¤§å› æœé“¾æ¡çš„å¿…ç„¶æ€§  è€ƒä¸ä¸Šå¤§å­¦-&gt;æ‰¾ä¸åˆ°å·¥ä½œ-&gt;é¥¿æ­»    åŒæ ‡ï¼šåº”ç”¨è§„åˆ™æ—¶åŒºåˆ«å¯¹å¾…   è™šå‡äºŒåˆ†/å‡ä¸¤éš¾ï¼šå¤æ‚é—®é¢˜ç®€åŒ–ä¸ºéé»‘å³ç™½è€Œå¿½è§†å…¶ä»–å¯èƒ½   ç¨»è‰äººï¼šæ­ªæ›²ã€å¤¸å¤§æˆ–è™šæ„å¯¹æ–¹è®ºç‚¹ä»¥åˆ¶é€ æ˜“æ”»å‡»çš„å‡é¶å­  â€“å­©å­ä¸èƒ½ä¹±è·‘ --ä½ æ„æ€è¦å…³ä»–ä»¬ç¦é—­ï¼Ÿ    å¾ªç¯è®ºè¯ï¼šå‡è®¾aè¯æ˜bï¼Œååˆ©ç”¨bè¯æ˜a   è¯‰è¯¸æƒå¨ï¼šå¼•ç”¨æƒå¨äººå£«è§‚ç‚¹è€Œéä»...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Mnizjc/img-repository/beluga.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Mnizjc</div><div class="author-info-description">I've got my nose in the air like a Boeing!</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Mnizjc"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Mnizjc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:mnizjc@mnizjc.qzz.io" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">Â¡Buena suerte!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF%E5%BB%BA%E7%AB%8B"><span class="toc-number">1.</span> <span class="toc-text">æ€è·¯å»ºç«‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E5%99%A8%E5%BA%94%E8%AF%A5%E9%95%BF%E5%95%A5%E6%A0%B7"><span class="toc-number">2.</span> <span class="toc-text">è§£æå™¨åº”è¯¥é•¿å•¥æ ·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#next%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">nextå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#advance-save%E7%AD%89%E5%87%BD%E6%95%B0%E5%8F%8A%E5%85%B6%E8%A1%8D%E7%94%9F%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">advance,saveç­‰å‡½æ•°åŠå…¶è¡ç”Ÿå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#skip-sep"><span class="toc-number">5.</span> <span class="toc-text">skip_sep</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-string"><span class="toc-number">6.</span> <span class="toc-text">read_string</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-hex-escape-read-dec-escape"><span class="toc-number">7.</span> <span class="toc-text">read_hex_escape &amp; read_dec_escape</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-multi-line"><span class="toc-number">8.</span> <span class="toc-text">read_multi_line</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#check-next-read-digits"><span class="toc-number">9.</span> <span class="toc-text">check_next &amp; read_digits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-hexademical-read-number"><span class="toc-number">10.</span> <span class="toc-text">read_hexademical &amp; read_number</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reserved-or-name"><span class="toc-number">11.</span> <span class="toc-text">reserved_or_name</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Post-Script"><span class="toc-number">12.</span> <span class="toc-text">Post Script</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/19/%E7%A5%9E%E5%A5%87/" title="ç¥å¥‡"><img src="https://free.picui.cn/free/2026/02/01/697e3dbc384ad.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç¥å¥‡"/></a><div class="content"><a class="title" href="/2026/02/19/%E7%A5%9E%E5%A5%87/" title="ç¥å¥‡">ç¥å¥‡</a><time datetime="2026-02-18T18:21:33.000Z" title="å‘è¡¨äº 2026-02-19 02:21:33">2026-02-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/13/hexo%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E%E5%92%8C%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93%E9%97%AE%E9%A2%98/" title="hexoæ¸²æŸ“å¼•æ“å’Œæ•°å­¦å…¬å¼æ¸²æŸ“é—®é¢˜"><img src="https://free.picui.cn/free/2026/02/01/697e3db4bff4f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexoæ¸²æŸ“å¼•æ“å’Œæ•°å­¦å…¬å¼æ¸²æŸ“é—®é¢˜"/></a><div class="content"><a class="title" href="/2026/02/13/hexo%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E%E5%92%8C%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93%E9%97%AE%E9%A2%98/" title="hexoæ¸²æŸ“å¼•æ“å’Œæ•°å­¦å…¬å¼æ¸²æŸ“é—®é¢˜">hexoæ¸²æŸ“å¼•æ“å’Œæ•°å­¦å…¬å¼æ¸²æŸ“é—®é¢˜</a><time datetime="2026-02-13T15:32:43.000Z" title="å‘è¡¨äº 2026-02-13 23:32:43">2026-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/05/%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86/" title="ä¸­å¿ƒæé™å®šç†"><img src="https://free.picui.cn/free/2026/01/30/697cd1575ee3c.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ä¸­å¿ƒæé™å®šç†"/></a><div class="content"><a class="title" href="/2026/02/05/%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86/" title="ä¸­å¿ƒæé™å®šç†">ä¸­å¿ƒæé™å®šç†</a><time datetime="2026-02-05T14:18:18.000Z" title="å‘è¡¨äº 2026-02-05 22:18:18">2026-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/05/%E5%8F%88%E5%BC%80%E5%A7%8B%E8%83%A1%E6%80%9D%E4%B9%B1%E6%83%B3%E4%BA%86/" title="åˆå¼€å§‹èƒ¡æ€ä¹±æƒ³äº†"><img src="https://free.picui.cn/free/2026/02/01/697e3dc4cc55f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åˆå¼€å§‹èƒ¡æ€ä¹±æƒ³äº†"/></a><div class="content"><a class="title" href="/2026/02/05/%E5%8F%88%E5%BC%80%E5%A7%8B%E8%83%A1%E6%80%9D%E4%B9%B1%E6%83%B3%E4%BA%86/" title="åˆå¼€å§‹èƒ¡æ€ä¹±æƒ³äº†">åˆå¼€å§‹èƒ¡æ€ä¹±æƒ³äº†</a><time datetime="2026-02-04T18:50:25.000Z" title="å‘è¡¨äº 2026-02-05 02:50:25">2026-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/04/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E3%80%81%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%E5%92%8C%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E5%8E%9F%E7%90%86/" title="å‚…é‡Œå¶çº§æ•°ã€å‚…é‡Œå¶å˜æ¢å’Œä¸ç¡®å®šæ€§åŸç†"><img src="https://s1.ax1x.com/2020/08/27/dhZ4JS.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å‚…é‡Œå¶çº§æ•°ã€å‚…é‡Œå¶å˜æ¢å’Œä¸ç¡®å®šæ€§åŸç†"/></a><div class="content"><a class="title" href="/2026/02/04/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E3%80%81%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%E5%92%8C%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E5%8E%9F%E7%90%86/" title="å‚…é‡Œå¶çº§æ•°ã€å‚…é‡Œå¶å˜æ¢å’Œä¸ç¡®å®šæ€§åŸç†">å‚…é‡Œå¶çº§æ•°ã€å‚…é‡Œå¶å˜æ¢å’Œä¸ç¡®å®šæ€§åŸç†</a><time datetime="2026-02-04T10:04:19.000Z" title="å‘è¡¨äº 2026-02-04 18:04:19">2026-02-04</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2022 - 2026 By Mnizjc</span></div><div class="footer_custom_text">salaam 'alaikum, çœ‹ä»€ä¹ˆå‘¢å“¥ä»¬</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>